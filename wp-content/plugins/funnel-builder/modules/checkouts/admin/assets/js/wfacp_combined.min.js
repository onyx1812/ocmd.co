!function(t){t.fn.xlAjaxChosen=function(e,n,a){var r,s,l,o;return null==e&&(e={}),null==a&&(a={}),s={minTermLength:3,afterTypeDelay:500,jsonTermKey:"term",keepTypingMsg:"Keep typing...",lookingForMsg:"Looking for"},o=this,r=null,l=t.extend({},s,t(o).data(),e),this.xlChosen(a||{}),this.each(function(){return t(this).next(".chosen-container").find(".search-field > input, .chosen-search > input").bind("keyup",function(){var a,s,u,c;if(cmb2_select_last_interact=t(this).parents(".chosen-container").prev("select"),u=t(this).val(),s=(c=t.trim(t(this).val())).length<l.minTermLength?l.keepTypingMsg:l.lookingForMsg+" '"+c+"'",o.next(".chosen-container").find(".no-results").text(s),0!==c.length)return c!==t(this).data("prevVal")&&(t(this).data("prevVal",c),this.timer&&clearTimeout(this.timer),!(c.length<l.minTermLength)&&(a=t(this),null==l.data&&(l.data={}),l.data[l.jsonTermKey]=c,null!=l.dataCallback&&(l.data=l.dataCallback(l.data)),l.success,l.success=function(r){var i,s,l;if(o=cmb2_select_last_interact,null!=r)return l=[],o.find("option").each(function(){return t(this).is(":selected")?l.push(t(this).val()+"-"+t(this).text()):t(this).remove()}),o.find("optgroup:empty").each(function(){return t(this).remove()}),i=null!=n?n(r,a):r,s=0,t.each(i,function(e,n){var a,r,i;return s++,n.group?((a=o.find("optgroup[label='"+n.text+"']")).size()||(a=t("<optgroup />")),a.attr("label",n.text).appendTo(o),t.each(n.items,function(e,n){var r,i;if(r="string"==typeof n?(i=e,n):(i=n.value,n.text),-1===t.inArray(i+"-"+r,l))return t("<option />").attr("value",i).html(r).appendTo(a)})):(r="string"==typeof n?(i=e,n):(i=n.value,n.text),-1===t.inArray(i+"-"+r,l)?t("<option />").attr("value",i).html(r).appendTo(o):void 0)}),s?o.trigger("chosen:updated"):(o.data().chosen.no_results_clear(),o.data().chosen.no_results(a.val())),null!=e.success&&e.success(r),a.val(u)},this.timer=setTimeout(function(){return r&&r.abort(),r=t.ajax(l)},l.afterTypeDelay)));selected_values_pre=[],o.find("option").each(function(){return t(this).is(":selected")?selected_values_pre.push(t(this).val()+"-"+t(this).text()):t(this).remove()});var h=[];return void 0!==o.attr("data-pre-data")&&(h=JSON.parse(o.attr("data-pre-data"))),t.each(h,function(e,n){if(text="string"==typeof n?(value=i,n):(value=n.value,n.text),-1===t.inArray(value+"-"+text,selected_values_pre))return t("<option />").attr("value",value).html(text).appendTo(o)}),o.trigger("chosen:updated"),!1})})}}(jQuery);

(function(){var t,e,s,i,r={}.hasOwnProperty;(i=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,s,i,r,l,o;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),o=[],i=0,r=(l=t.childNodes).length;i<r;i++)s=l[i],o.push(this.add_option(s,e,t.disabled));return o},t.prototype.add_option=function(t,e,s){if("OPTION"===t.nodeName.toUpperCase())return""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:!0===s?s:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},t.prototype.escapeExpression=function(t){var e,s;return null==t||!1===t?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(s,function(t){return e[t]||"&amp;"})):t},t}()).select_to_array=function(t){var e,s,r,l,o;for(s=new i,r=0,l=(o=t.childNodes).length;r<l;r++)e=o[r],s.add_node(e);return s.parsed},e=function(){function t(e,s){this.form_field=e,this.options=null!=s?s:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options},t.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(t){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(t){var e=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return e.blur_test()},100)},t.prototype.results_option_build=function(t){var e,s,i,r,l;for(e="",i=0,r=(l=this.results_data).length;i<r;i++)(s=l[i]).group?e+=this.result_add_group(s):e+=this.result_add_option(s),(null!=t?t.first:void 0)&&(s.selected&&this.is_multiple?this.choice_build(s):s.selected&&!this.is_multiple&&this.single_set_selected_text(s.text));return e},t.prototype.result_add_option=function(t){var e,s;return t.search_match&&this.include_option_in_results(t)?(e=[],!t.disabled&&(!t.selected||!this.is_multiple)&&e.push("active-result"),t.disabled&&(!t.selected||!this.is_multiple)&&e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),s=""!==t.style.cssText?' style="'+t.style+'"':"",'<li class="'+e.join(" ")+'"'+s+' data-option-array-index="'+t.array_index+'">'+t.search_text+"</li>"):""},t.prototype.result_add_group=function(t){return(t.search_match||t.group_match)&&0<t.active_options?'<li class="group-result">'+t.search_text+"</li>":""},t.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing)return this.winnow_results()},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(t){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,s,i,r,l,o,n,h,c,a,_,u;for(this.no_results_clear(),r=0,t=(o=this.get_search_text()).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=this.search_contains?"":"^",s=new RegExp(i+t,"i"),c=new RegExp(t,"i"),a=0,_=(u=this.results_data).length;a<_;a++)(e=u[a]).search_match=!1,l=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(0===(l=this.results_data[e.group_array_index]).active_options&&l.search_match&&(r+=1),l.active_options+=1),e.group&&!this.group_search||(e.search_text=e.group?e.label:e.html,e.search_match=this.search_string_match(e.search_text,s),e.search_match&&!e.group&&(r+=1),e.search_match?(o.length&&(n=e.search_text.search(c),h=e.search_text.substr(0,n+o.length)+"</em>"+e.search_text.substr(n+o.length),e.search_text=h.substr(0,n)+"<em>"+h.substr(n)),null!=l&&(l.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),r<1&&o.length?(this.update_results_content(""),this.no_results(o)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.search_string_match=function(t,e){var s,i,r,l;if(e.test(t))return!0;if(this.enable_split_word_search&&(0<=t.indexOf(" ")||0===t.indexOf("["))&&(i=t.replace(/\[|\]/g,"").split(" ")).length)for(r=0,l=i.length;r<l;r++)if(s=i[r],e.test(s))return!0},t.prototype.choices_count=function(){var t,e,s;if(null!=this.selected_option_count)return this.selected_option_count;for(t=this.selected_option_count=0,e=(s=this.form_field.options).length;t<e;t++)s[t].selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){if(t.preventDefault(),!this.results_showing&&!this.is_disabled)return this.results_show()},t.prototype.keyup_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&0<this.choices_count())return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return!(this.is_multiple&&!this.display_selected_options&&t.selected||!this.display_disabled_options&&t.disabled||t.empty)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?8<=document.documentMode:!(/iP(od|hone)/i.test(window.navigator.userAgent)||/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent))},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),(t=jQuery).fn.extend({xlChosen:function(i){return e.browser_is_supported()?this.each(function(e){var r,l;l=(r=t(this)).data("chosen"),"destroy"===i&&l?l.destroy():l||r.data("chosen",new s(this,i))}):this}}),s=function(s){function l(){return l.__super__.constructor.apply(this,arguments)}return function(t,e){function s(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype}(l,e),l.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},l.prototype.set_up_html=function(){var e,s;return(e=["chosen-container"]).push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),s={class:e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(s.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",s),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},l.prototype.register_observers=function(){var t=this;return this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},l.prototype.destroy=function(){return t(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},l.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},l.prototype.container_mousedown=function(e){if(!this.is_disabled&&(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null==e||!t(e.target).hasClass("search-choice-close")))return this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(document).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},l.prototype.container_mouseup=function(t){if("ABBR"===t.target.nodeName&&!this.is_disabled)return this.results_reset(t)},l.prototype.search_results_mousewheel=function(t){var e,s,i;if(null!=(e=-(null!=(s=t.originalEvent)?s.wheelDelta:void 0)||(null!=(i=t.originialEvent)?i.detail:void 0)))return t.preventDefault(),"DOMMouseScroll"===t.type&&(e*=40),this.search_results.scrollTop(e+this.search_results.scrollTop())},l.prototype.blur_test=function(t){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},l.prototype.close_field=function(){return t(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},l.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},l.prototype.test_active_click=function(e){return this.container.is(t(e.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},l.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=i.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},l.prototype.result_do_highlight=function(t){var e,s,i,r,l;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),r=(i=parseInt(this.search_results.css("maxHeight"),10))+(l=this.search_results.scrollTop()),(e=(s=this.result_highlight.position().top+this.search_results.scrollTop())+this.result_highlight.outerHeight())>=r)return this.search_results.scrollTop(0<e-i?e-i:0);if(s<l)return this.search_results.scrollTop(s)}},l.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},l.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},l.prototype.update_results_content=function(t){return this.search_results.html(t)},l.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},l.prototype.set_tab_index=function(t){var e;if(this.form_field.tabIndex)return e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e},l.prototype.set_label_behavior=function(){var e=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),0<this.form_field_label.length)return this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()})},l.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},l.prototype.search_results_mouseup=function(e){var s;if((s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first()).length)return this.result_highlight=s,this.result_select(e),this.search_field.focus()},l.prototype.search_results_mouseover=function(e){var s;if(s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first())return this.result_do_highlight(s)},l.prototype.search_results_mouseout=function(e){if(t(e.target).hasClass("active-result"))return this.result_clear_highlight()},l.prototype.choice_build=function(e){var s,i,r=this;return s=t("<li />",{class:"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?s.addClass("search-choice-disabled"):((i=t("<a />",{class:"search-choice-close","data-option-array-index":e.array_index})).bind("click.chosen",function(t){return r.choice_destroy_link_click(t)}),s.append(i)),this.search_container.before(s)},l.prototype.choice_destroy_link_click=function(e){if(e.preventDefault(),e.stopPropagation(),!this.is_disabled)return this.choice_destroy(t(e.target))},l.prototype.choice_destroy=function(t){if(this.result_deselect(t[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&0<this.choices_count()&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()},l.prototype.results_reset=function(){if(this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},l.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},l.prototype.result_select=function(t){var e,s,i;if(this.result_highlight)return e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):(this.result_single_selected&&(this.result_single_selected.removeClass("result-selected"),i=this.result_single_selected[0].getAttribute("data-option-array-index"),this.results_data[i].selected=!1),this.result_single_selected=e),e.addClass("result-selected"),(s=this.results_data[e[0].getAttribute("data-option-array-index")]).selected=!0,this.form_field.options[s.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(s):this.single_set_selected_text(s.text),(!t.metaKey&&!t.ctrlKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[s.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())},l.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},l.prototype.result_deselect=function(t){var e;return e=this.results_data[t],!this.form_field.options[e.options_index].disabled&&(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},l.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},l.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},l.prototype.winnow_results_set_highlight=function(){var t,e;if(null!=(t=(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result")).length?e.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(t)},l.prototype.no_results=function(e){var s;return(s=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>')).find("span").first().html(e),this.search_results.append(s)},l.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},l.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},l.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result")).length?this.result_do_highlight(t.first()):(0<this.choices_count()&&this.results_hide(),this.result_clear_highlight()):void 0:this.results_show()},l.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last()).length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0},l.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},l.prototype.keydown_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},l.prototype.search_field_scale=function(){var e,s,i,r,l,o,n,h;if(this.is_multiple){for(r="position:absolute; left: -1000px; top: -1000px; display:none;",n=o=0,h=(l=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"]).length;n<h;n++)r+=(i=l[n])+":"+this.search_field.css(i)+";";return(e=t("<div />",{style:r})).text(this.search_field.val()),t("body").append(e),o=e.width()+25,e.remove(),(s=this.container.outerWidth())-10<o&&(o=s-10),this.search_field.css({width:o+"px"})}},l}()}).call(this);

"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}window.wfacp=function(p){return{ajax:function(t,e,o){var n,a,l=this,s=null,u={},i="wfacp_";function f(t,e,o,n,a,i){0<e.length&&e.prop("disabled",!1),o.remove(),p(".bwf_ajax_btn_bottom_container").removeClass("ajax_loader_show"),!0===l.hasOwnProperty(t)&&"function"==typeof l[t]&&l[t](n,e,o,a,i)}return this.action=null,this.data=function(t){return t},this.before_send=function(t){},this.async=function(t){return t},this.method=function(t){return t},this.success=function(t,e,o,n,a){},this.complete=function(t,e,o,n,a){},this.error=function(t,e,o,n,a){wfacp_localization.error.hasOwnProperty(t.status)&&wfacp.swal(wfacp_localization.error[t.status]),wfacp.hide_spinner()},this.action=function(t){return t},this.ajax=function(n,t){"object"===_typeof(t)?t.action=n:t={action:n},t.action=i+n,l.before_send(document.body,n),t.wfacp_nonce=wfacp_secure.nonce;var e={url:ajaxurl,async:l.async(!0),method:l.method("POST"),data:t,success:function(t,e,o){"object"===_typeof(t)&&t.hasOwnProperty("nonce")&&(wfacp_secure.nonce=t.nonce,delete t.nonce),l.success(t,e,o,n)},complete:function(t,e,o){l.complete(t,e,o,n)},error:function(t,e,o){l.error(t,e,o,n)}};u.hasOwnProperty(n)?clearTimeout(u[n]):u[n]=null,u[n]=setTimeout(function(t){p.ajax(t)},200,e)},!0===e?0<p(n=t).length&&(p(n).on("submit",function(t){t.preventDefault();var e=p(this).data("bwf-action");"undefined"!==e&&(e=(e=i+e).trim(),s=this,function(n){var t=s,a=null,e=new FormData(t);e.append("action",n),e.append("wfacp_nonce",wfacp_secure.nonce),p(t).attr("method"),a=(0===p(t).find("."+n+"_ajax_loader").length&&p(t).find(".bwf_form_submit").prepend("<span class='"+n+"_ajax_loader spinner'></span>"),p(t).find("."+n+"_ajax_loader"));var o=p(".bwf_ajax_btn_bottom_container");a.addClass("ajax_loader_show"),o.addClass("ajax_loader_show");var i=p(t).find("fieldset");0<i.length&&i.prop("disabled",!0),l.before_send(t,n);var c=l.data(e,t),r={url:ajaxurl,async:l.async(!0),method:l.method("POST"),data:c,processData:!1,contentType:!1,success:function(t,e,o){"object"===_typeof(t)&&t.hasOwnProperty("nonce")&&(wfacp_secure.nonce=t.nonce,delete t.nonce),f(n+"_ajax_success",i,a,t,e,o),l.success(t,e,o,i,a)},complete:function(t,e,o){f(n+"_ajax_complete",i,a,t,e,o),l.complete(t,e,o,i,a)},error:function(t,e,o){f(n+"_ajax_error",i,a,t,e,o),l.error(t,e,o,i,a)}};u.hasOwnProperty(n)?clearTimeout(u[n]):u[n]=null,u[n]=setTimeout(function(t){p.ajax(t)},200,r)}(l.action=e))}),"function"==typeof o&&o(l)):!1===e&&0<p(a=t).length&&(p(a).on("click",function(t){t.preventDefault();var e=p(this).data("bwf-action");"undefined"!==e&&(e=(e=i+e).trim(),s=this,function(t){var e=s,o=l.data({},e);"object"===_typeof(o)?o.action=t:o={action:t},l.before_send(e,t),o.wfacp_nonce=wfacp_secure.nonce;var n={url:ajaxurl,async:l.async(!0),method:l.method("POST"),data:o,success:function(t,e,o){"object"===_typeof(t)&&t.hasOwnProperty("nonce")&&(wfacp_secure.nonce=t.nonce,delete t.nonce),l.success(t,e,o,s)},complete:function(t,e,o){l.complete(t,e,o,s)},error:function(t,e,o){l.error(t,e,o,s)}};u.hasOwnProperty(t)?clearTimeout(u[t]):u[t]=null,u[t]=setTimeout(function(t){p.ajax(t)},200,n)}(l.action=e))}),"function"==typeof o&&o(l)),this},hooks:{hooks:{action:{},filter:{}},addAction:function(t,e,o,n){var a=2<arguments.length&&void 0!==o?o:10,i=3<arguments.length&&void 0!==n?n:"";this.addHook("action",t,e,a,i)},addFilter:function(t,e,o,n){var a=2<arguments.length&&void 0!==o?o:10,i=3<arguments.length&&void 0!==n?n:"";this.addHook("filter",t,e,a,i)},doAction:function(t){this.doHook("action",t,arguments)},applyFilters:function(t){return this.doHook("filter",t,arguments)},removeAction:function(t,e){this.removeHook("action",t,e)},removeFilter:function(t,e,o){this.removeHook("filter",t,e,o)},addHook:function(t,e,o,n,a){null==this.hooks[t][e]&&(this.hooks[t][e]=[]);var i=this.hooks[t][e];null==a&&(a=e+"_"+i.length),null==n&&(n=10),this.hooks[t][e].push({tag:a,callable:o,priority:n})},doHook:function(t,e,o){if(o=Array.prototype.slice.call(o,1),null!=this.hooks[t][e]){var n,a=this.hooks[t][e];a.sort(function(t,e){return t.priority-e.priority});for(var i=0;i<a.length;i++)"function"!=typeof(n=a[i].callable)&&(n=window[n]),"action"==t?n.apply(null,o):o[0]=n.apply(null,o)}if("filter"==t)return o[0]},removeHook:function(t,e,o,n){if(null!=this.hooks[t][e])for(var a=this.hooks[t][e],i=a.length-1;0<=i;i--)null!=n&&n!=a[i].tag||null!=o&&o!=a[i].priority||a.splice(i,1)}},tools:{ol:function(t){var e=0;return null!=t&&"object"===_typeof(t)&&(e=Object.keys(t).length),e},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},hp:function(t,e){var o=!1;return"object"===_typeof(t)&&void 0!==e&&(o=t.hasOwnProperty(e)),o},jsp:function(t){if("object"!==_typeof(t))return t;var e=JSON.stringify(t);return e=JSON.parse(e)},kys:function(t){return"object"===_typeof(t)&&null!=t&&0<this.ol(t)?Object.keys(t):[]},ucfirst:function(t){return t.replace(/^\w/,function(t){return t.toUpperCase()})},stripHTML:function(t){return p("<div>"+t+"</div>").text()},string_to_bool:function(t){var e=0<arguments.length&&void 0!==t?t:"";return""!==e&&"false"!=e&&("boolean"==typeof e?e:"yes"===e||1===e||"true"===e||"1"===e)},is_object:function(t){return null!=t&&"object"===_typeof(t)},is_bool:function(t){return"boolean"==typeof(t=wfacp.tools.string_to_bool(t))},timestamp:function(){return(new Date).getTime()}},swal:function(t){return wfacp_swal(p.extend({title:"",text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#0073aa",cancelButtonColor:"#e33b3b",confirmButtonText:""},t))},model:{add_product:function(){var t=p("#modal-add-product");0<t.length&&t.iziModal({title:"Add Product",headerColor:"#6dbe45",background:"#efefef",borderBottom:!1,width:600,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInDown",transitionOut:"fadeOutDown",navigateArrows:"false",onOpening:function(t){t.startLoading()},onOpened:function(t){t.stopLoading()},onClosed:function(){}})}},sortable:function(t,o,n,a){var e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:".wfacp_item_drag",i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:".ui-state-disabled",c=6<arguments.length&&void 0!==arguments[6]?arguments[6]:"",r=7<arguments.length&&void 0!==arguments[7]?arguments[7]:{},l=p(t);if(0!==l.length){l.off("sortable");var s={connectWith:t,start:function(t,e){o(t,e)},stop:function(t,e){n(t,e)},over:function(t,e){a("in",t,e)},out:function(t,e){a("out",t,e)},cursor:"move"};if(0<wfacp.tools.ol(r))for(var u in r)s[u]=r[u];var f=".wfacp_item_drag";""!==e&&(f=e),""!==i&&(f+=":not("+i+")"),s.items=f,""!==c&&(s.placeholder=c),l.sortable(s),l.disableSelection()}},addClass:function(t,e){p(t).addClass(e)},removeClass:function(t,e){p(t).removeClass(e)},show_spinner:function(){var t=p(".wfacp_spinner.spinner");0<t.length&&t.css("visibility","visible")},hide_spinner:function(){var t=p(".wfacp_spinner.spinner");0<t.length&&t.css("visibility","hidden")},show_data_save_model:function(t){var e=0<arguments.length&&void 0!==t?t:"";""!==e&&(wfacp.show_saved_model.iziModal("setTitle",e),wfacp.show_saved_model.iziModal("open"))},is_global_checkout:function(){return wfacp.tools.hp(wfacp_data,"global_settings")&&wfacp.tools.hp(wfacp_data.global_settings,"override_checkout_page_id")&&wfacp_data.global_settings.override_checkout_page_id==wfacp_data.id},editorConfig:{tinymce:{theme:"modern",skin:"lightgray",language:"en",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table,dl.wp-caption",classes:"alignleft"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img,table,dl.wp-caption",classes:"aligncenter"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table,dl.wp-caption",classes:"alignright"}],strikethrough:{inline:"del"}},relative_urls:!1,remove_script_host:!1,convert_urls:!1,browser_spellcheck:!0,fix_list_elements:!0,entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:!1,cache_suffix:"wp-mce-4800-20180716",resize:"vertical",menubar:!1,branding:!1,preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",end_container_on_empty_block:!0,wpeditimage_html5_captions:!0,wp_lang_attr:"en-US",wp_keep_scroll_position:!1,wp_shortcut_labels:{"Heading 1":"access1","Heading 2":"access2","Heading 3":"access3","Heading 4":"access4","Heading 5":"access5","Heading 6":"access6",Paragraph:"access7",Blockquote:"accessQ",Underline:"metaU",Strikethrough:"accessD",Bold:"metaB",Italic:"metaI",Code:"accessX","Align center":"accessC","Align right":"accessR","Align left":"accessL",Justify:"accessJ",Cut:"metaX",Copy:"metaC",Paste:"metaV","Select all":"metaA",Undo:"metaZ",Redo:"metaY","Bullet list":"accessU","Numbered list":"accessO","Insert/edit image":"accessM","Remove link":"accessS","Toolbar Toggle":"accessZ","Insert Read More tag":"accessT","Insert Page Break tag":"accessP","Distraction-free writing mode":"accessW","Add Media":"accessM","Keyboard Shortcuts":"accessH"},toolbar1:"bold,italic,bullist,numlist,link",wpautop:!1,indent:!0,elementpath:!1,plugins:"charmap,colorpicker,hr,lists,paste,tabfocus,textcolor,fullscreen,wordpress,wpautoresize,wpeditimage,wpemoji,wpgallery,wplink,wptextpattern"},quicktags:{buttons:"strong,em,link,ul,ol,li,code"}},show_pro_message:function(t){var e=wfacp_localization.global.pro_feature_message_heading,o=wfacp_localization.global.pro_feature_message_subheading;"optimization"==t?(e=wfacp_localization.global.pro_feature_optimization_heading,o=wfacp_localization.global.pro_feature_optimization_subheading):"track-analytics"==t?(e=wfacp_localization.global.pro_feature_track_analytics_heading,o=wfacp_localization.global.pro_feature_track_analytics_subheading):"pro_fields"==t?(e=wfacp_localization.global.pro_feature_pro_fields_heading,o=wfacp_localization.global.pro_feature_pro_fields_subheading):"add_custom_field"==t?(e=wfacp_localization.global.pro_feature_add_custom_field_heading,o=wfacp_localization.global.pro_feature_add_custom_field_subheading):"add_new_step"==t?(e=wfacp_localization.global.pro_feature_add_new_step_heading,o=wfacp_localization.global.pro_feature_add_new_step_subheading):"product_settings"==t&&(e=wfacp_localization.global.pro_feature_product_settings_heading,o=wfacp_localization.global.pro_feature_product_settings_subheading);var n=wfacp.swal({text:o,title:e,type:"",confirmButtonText:wfacp_localization.global.upgrade_button_text,showCancelButton:!1,showCloseButton:!0,customClass:"swal-pro-modal"});n.then(function(t){t.value&&(window.location.href="https://buildwoofunnels.com/exclusive-offer/")}),n.catch(function(){})}}}(jQuery);

"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}!function(v){var e=function(){function t(e){_classCallCheck(this,t),null!==document.getElementById("wfacp_product_container")&&this.init(e)}return _createClass(t,[{key:"init",value:function(e){this.search_timeout=null,this.search_model_open=null,this.show_saved_model=null,this.id=e.id,this.name=e.name,this.wfacp_id=e.id,this.currency=e.currency,this.products=e.products,this.add_to_cart_setting=e.products_settings.add_to_cart_setting,this.last_active_product="",this.addProductModel(),this.main()}},{key:"main",value:function(){var o=this;return this.product_vue=new Vue({el:"#wfacp_product_container",created:function(){wfacp.hooks.doAction("wfacp_product_ui_created",this),this.sortable()},methods:{sortable:function(){var a=this;setTimeout(function(){v(".wfacp_product_table_sortable").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.wfacp_product_drag_handle .wfacp_drag_handle",scrollSensitivity:40,stop:function(e,t){a.StopSortable(e,t)}})},800)},StopSortable:function(){},isEmpty:function(){return 0===wfacp.tools.ol(this.products)},addProduct:function(e,t){v(".wfacp-preview").show(),v(".wfacp_s_menu_rules").removeClass("wfacp_stop_navigation"),Vue.set(this.products,e,t),this.save_products()},removeProduct:function(t){var e=wfacp.swal(wfacp_localization.global.remove_product);e.then(function(e){e.value&&(o.formHasChanges=!0,o.removeProduct(t))}),e.catch(function(e){})},set_product_data:function(e,t,a){if(null!=a.target){o.formHasChanges=!0;var i=a.target.value?a.target.value:"";if(this.last_active_product=e,"discount_amount"===t){var s=this.products[e].discount_type;"percent_discount_sale"!==s&&"percent_discount_reg"!==s||100<i&&(i=100)}else if("discount_type"===t){var l=this.products[e].discount_amount;"percent_discount_sale"!==i&&"percent_discount_reg"!==i||(l=0,Vue.set(this.products[e],"discount_amount",l))}Vue.set(this.products[e],t,i)}},remove_non_required_keys:function(e){if(0<wfacp.tools.ol(e))for(var t in e=wfacp.tools.jsp(e))delete e[t].price,delete e[t].regular_price,delete e[t].sale_price,delete e[t].image;return e},save_products:function(){var t=this,e=new wfacp.ajax,a=this.remove_non_required_keys(this.products),i={},s=v(".wfacp-product-row");0===s.length?i=a:s.each(function(){var e=v(this).attr("id");i[e]=a[e]});var l={products:i,wfacp_id:o.id,settings:{add_to_cart_setting:this.add_to_cart_setting},last_active_product:this.last_active_product};e.ajax("save_products",l),wfacp.show_spinner(),e.success=function(e){wfacp.show_data_save_model(e.msg),t.sortable()}}},data:{have_variable:!1,name:this.name,currency:this.currency,products:this.products,add_to_cart_setting:this.add_to_cart_setting,last_active_product:this.last_active_product}}),this.product_vue}},{key:"addProducts",value:function(e){if(wfacp.tools.hp(e,"products")&&0<wfacp.tools.ol(e.products)){var t=e.products;for(var a in t)this.product_vue.addProduct(a,t[a])}}},{key:"removeProduct",value:function(t){var a=this,e=v("#"+t);0<e.length&&e.find(".wfacp_overlay_active").removeClass("wfacp_overlay_none_here");var i=new wfacp.ajax;i.ajax("remove_product",{product_key:t,wfacp_id:this.id}),i.complete=function(e){0<wfacp.tools.ol(e)&&(Vue.delete(a.product_vue.products,t),0===wfacp.tools.ol(a.product_vue.products)?(v(".wfacp-preview").hide(),v(".wfacp_s_menu_rules").addClass("wfacp_stop_navigation")):v(".wfacp_overlay_active").addClass("wfacp_overlay_none_here"))}}},{key:"addProductVue",value:function(e){if(!0!==this.search_model_open){this.search_model_open=!0;var o=this;return this.add_product_vue=new Vue({el:"#modal-add-product-form",components:{Multiselect:window.VueMultiselect.default},data:{modal:e,isLoading:!1,products:[],is_single:"",include_variations:!1,selectedProducts:[]},methods:{onSubmit:function(){var e=new wfacp.ajax,t=this;t.modal.startLoading();var a=[],i=this.selectedProducts;if(0<wfacp.tools.ol(this.selectedProducts))for(var s in i)a.push(i[s].id);var l={products:a,wfacp_id:o.id};e.ajax("add_product",l),e.success=function(e){0<wfacp.tools.ol(e)&&o.addProducts(e),v("#modal-add-product").iziModal("close")},e.complete=function(){t.clearAll(),t.modal.stopLoading()}},asyncFind:function(e){var i=this;this.isLoading=!0,""!==e?(clearTimeout(o.search_timeout),o.search_timeout=setTimeout(function(e){var t=new wfacp.ajax,a={term:e,variations:i.include_variations};t.ajax("product_search",a),t.success=function(e){i.products=e,i.isLoading=!1},t.complete=function(){i.isLoading=!1}},1e3,e)):this.isLoading=!1},clearAll:function(){this.products=[],this.selectedProducts=[],this.isLoading=!1}}}),this.add_product_vue}}},{key:"addProductModel",value:function(){var t=this,e=v("#modal-add-product");0<e.length&&e.iziModal({title:wfacp_localization.global.add_product_popup,headerColor:"#6dbe45",background:"#efefef",borderBottom:!1,width:600,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInDown",transitionOut:"fadeOutDown",navigateArrows:"false",onOpening:function(e){e.startLoading()},onOpened:function(e){e.stopLoading(),t.addProductVue(e)},onClosed:function(){}})}}]),t}(),a=function(){function t(e){_classCallCheck(this,t),this.add_field_model_open=!1,this.add_section_model_open=!1,this.edit_field_model_open=!1,this.step_name="single_step",this.current_edit_field={},(this.field_index=null)!=document.getElementById("wfacp_layout_container")&&(this.builder=e,this.id=e.id,this.steps=e.layout.steps,this.input_fields=e.layout.input_fields,this.available_fields=e.layout.available_fields,this.fieldsets=e.layout.fieldsets,this.available_steps=["single_step","two_step","third_step"],this.model(),this.main(),this.editFieldVue())}return _createClass(t,[{key:"main",value:function(){var r=this;return this.layout_vue=new Vue({el:"#wfacp_layout_container",created:function(){this.enableSortable(),wfacp.hooks.doAction("wfacp_layout_created",this),this.enableTabs(),this.validateDependency()},methods:{enableTabs:function(){var t=this;setTimeout(function(){v(document).on("click",".wfacp_template_tabs",function(){if(!v(this).hasClass("wfacp_active_tabs")){var e=v(this).data("slug");t.show_template_frame(e)}})},1500)},set_template:function(e){Vue.set(this,"current_step",e),this.enableSortable(),this.show_template_frame(e)},show_template_frame:function(a){setTimeout(function(){var e=v(".single_step_template[data-slug='"+a+"']"),t=v(".wfacp_template_tabs[data-slug='"+a+"']");0<e.length&&(v(".wfacp_template_tabs").removeClass("wfacp_active_tabs"),v(".single_step_template").hide(),t.addClass("wfacp_active_tabs"),e.show())},0,a)},enableSortable:function(){var e=this;setTimeout(function(){wfacp.sortable(".template_field_container",e.StartSortable,e.StopSortable,e.hoverDrag,"","","wfacp_save_btn_style ui-sortable-placeholder ui-state-highlight"),wfacp.sortable(".wfacp_sections_holder.single_step",e.StartSectionSortable,e.StopSectionSortable,function(){},".wfacp_field_container","","",{axis:"y"})},300)},StartSectionSortable:function(e){v(e.toElement).parents(".wfacp_field_container").addClass("highlight_field_container")},StopSectionSortable:function(e){v(e.toElement).parents(".wfacp_field_container").removeClass("highlight_field_container")},hoverDrag:function(e,t){var a=v(t.target).find(".template_field_placeholder_tbl");"in"===e?v(t.toElement).parents(".wfacp_field_container")[0]!==v(t.target).parents(".wfacp_field_container")[0]&&(v(t.target).parents(".wfacp_field_container").addClass("highlight_field_container"),0<a.length&&a.hide()):(0<a.length&&a.show(),v(t.target).parents(".wfacp_field_container").removeClass("highlight_field_container"))},StartSortable:function(e,t){var a=v(".wfacp_save_btn_style.ui-sortable-placeholder.ui-state-highlight");0<v(t.item[0]).length&&0<a.length&&(a.width(v(t.item[0]).width()),a.html("<span class='wfacp_placeholder_text_here'>placeholder</span>")),wfacp.addClass(".wfacp_field_container","activate_dragging_field")},StopSortable:function(e){v(".wfacp_field_container").removeClass("activate_dragging_field highlight_field_container");var t,a=v(e.toElement).parents(".wfacp_field_container"),i=v(e.target),s=v(e.toElement);"span"===e.toElement.localName&&(s=v(e.toElement).parent("div")),t=s.attr("data-id");var l=a.attr("step-name"),o=i.attr("step-name"),n=a.attr("field-index"),d=i.attr("field-index");l!==o?(s.remove(),this.parentSwitching(o,l,d,n,t)):n!==d&&(s.remove(),this.updateInput(l,d,n,t))},elementSorting:function(){},dragStart:function(e){r.dragStart(e)},allowDrop:function(e){r.allowDrop(e)},dragEnd:function(e){r.dragEnd(e)},dragEnter:function(e){r.dragEnter(e)},dragLeave:function(e){r.dragLeave(e)},drop:function(e,t,a){var i=r.drop(e);if(!1===i)return null;var s=i[0],l=i[1];if(""===l)return null;this.addInput(t,a,s,l)},addInput:function(e,t,a,i){var s,l=!0,o=v(".single_step").find(".wfacp_field_container[field-index="+t+"]");0<o.length&&0<o.find(".wfacp_item_drag[data-id="+a+"]").length&&(l=!1),l&&((s=wfacp.tools.jsp(this.input_fields[i][a])).id=a,s.field_type=i,this.pushFieldInStep(e,t,s),Vue.delete(this.input_fields[i],a),this.validateDependency(),v(".wfacp_field_container").removeClass("highlight_field_container"),v(".wfacp_field_container").removeClass("highlight_field_container activate_dragging_field"))},getFieldFromSection:function(e,t,a){var i=this.findFieldIndex(e,t,a);if(null==i)return null;var s=wfacp.tools.jsp(this.fieldsets[e][t].fields[i]);return wfacp.tools.hp(this.fieldsets[e][t],"fields")||Vue.set(this.fieldsets[e][t],"fields",[]),s},pushFieldInStep:function(e,t,a){wfacp.tools.hp(this.fieldsets[e][t],"fields")||Vue.set(this.fieldsets[e][t],"fields",[]);var i=wfacp.tools.jsp(this.fieldsets[e][t].fields);i.push(a),Vue.set(this.fieldsets[e][t],"fields",i),this.hideFieldContainerPlaceholder(e,t)},parentSwitching:function(e,t,a,i,s){var l=this.getFieldFromSection(e,a,s);if(null!==l){this.pushFieldInStep(t,i,l);var o=wfacp.tools.jsp(this.fieldsets[e][a].fields);Vue.set(this.fieldsets[e][a],"fields",o)}},updateInput:function(e,t,a,i){var s=this.getFieldFromSection(e,t,i);null!=s&&this.pushFieldInStep(e,a,s)},moveStepField:function(e){wfacp.hooks.doAction("manage_step_field",wfacp.tools.jsp(e),this);var t=wfacp.tools.jsp(this.fieldsets[e]);if(void 0!==t&&0!==wfacp.tools.ol(t))for(var a in t)if(0!==wfacp.tools.ol(t[a].fields)){for(var i=t[a].fields,s=0;s<i.length;s++){var l=i[s].id,o=i[s].field_type;Vue.set(this.input_fields[o],l,i[s])}Vue.set(this.fieldsets[e][a],"fields",[])}},removeField:function(e,t,a,i,s){s.stopPropagation();var l=this.findFieldIndex(e,i,t);if(null==l)return null;var o=wfacp.tools.jsp(this.fieldsets[e][i].fields),n=o[l];return o.splice(l,1),Vue.set(this.fieldsets[e][i],"fields",o),0<wfacp.tools.ol(n)&&Vue.set(this.input_fields[a],t,n),this.showFieldContainerPlaceholder(e,i),this.validateDependency(),!0},findFieldIndex:function(e,t,a){if(!wfacp.tools.hp(this.fieldsets[e][t],"fields"))return this.fieldsets[e][t].fields=[],null;var i=wfacp.tools.jsp(this.fieldsets[e][t].fields);if(0===i.length)return null;for(var s=0;s<i.length;s++)if(i[s].id===a)return s;return null},prepareErrorMsg:function(e,t){var a=1<arguments.length&&void 0!==t?t:"",i=[];for(var s in e)i.push(e[s]);return i.join(a)},getRequiredField:function(){return wfacp.tools.jsp(wfacp_localization.fields.input_field_error)},getEmptySteps:function(){return wfacp.tools.jsp(wfacp_localization.fields.steps_error_msgs)},getSortedElement:function(){var r=this,c=this.getRequiredField(),t=this.getEmptySteps(),a={},_=!1,p=!1,f=0,u=1,h=!1,e=v(".single_step_template"),w={single_step:[],two_step:[],third_step:[]},m=["order_summary","order_coupon","product_switching","shipping_calculator"];if(0<e.length){var g=1;e.each(function(){var n=0,d=v(this).attr("data-slug");if(0!==v(this).find(".wfacp_item_drag").length)if(wfacp.tools.hp(r.fieldsets,d)){var s=wfacp.tools.jsp(r.fieldsets[d]);if(0!==s.length){var e=v(this).find(".wfacp_field_container");0<e.length&&e.each(function(e,t){var a=v(this),l=a.attr("field-index"),i=a[0].querySelectorAll(".wfacp_item_drag");if(!1===wfacp.tools.hp(w,d)&&(w[d]=wfacp.tools.jsp(s)),0!==i.length){w[d][n]=wfacp.tools.jsp(s[l]),w[d][n].fields=[],w[d][n].html_fields={};var o=wfacp.tools.jsp(s[l].fields);i.forEach(function(e,t){var a=e.getAttribute("data-id");"address"===a&&(_=!0,f=g),"shipping-address"===a&&(p=!0,u=g),"shipping_calculator"===a&&(h=!0),-1<m.indexOf(a)&&(w[d][n].html_fields[a]=!0),wfacp.tools.hp(c,a)&&delete c[a];var i=r.findFieldIndex(d,l,a);if(null!==i){var s=o[i];w[d][n].fields.push(s)}g++}),n++}})}else a[d]=t[d]}else a[d]=t[d];else a[d]=t[d]})}return{fieldsets:w,required:c,empty_steps:a,have_billing_address:_,have_shipping_address:p,have_billing_address_index:f,have_shipping_address_index:u,enabled_product_switching:"no",have_shipping_method:h,have_coupon_field:!1}},showStepsError:function(e){var t=e;wfacp_localization.global.confirm_button_text;0!==Object.keys(t).length&&t.hasOwnProperty("third_step")&&(delete t.third_step,wfacp_localization.global.confirm_button_text_ok);var a=this.prepareErrorMsg(t," and ");return a+=" "+wfacp_localization.fields.empty_step_error,wfacp.swal({text:a,title:wfacp_localization.fields.validation_error,type:"error",confirmButtonText:wfacp_localization.importer.close_prompt_text,showCancelButton:!1}),!1},save_template:function(){var e=this.getSortedElement(),t=e.empty_steps,a=wfacp.tools.ol(t);if(0<a){if(1!==a)return this.showStepsError(t),!1;var i=v(".wfacp_step_heading .wfacp_template_tabs:last").data("slug");if(!wfacp.tools.hp(t,i))return this.showStepsError(t),!1}var s=e.required;if(0<wfacp.tools.ol(s)){var l=this.prepareErrorMsg(s);return wfacp.swal({text:l,title:"Validation Error",type:"error",confirmButtonText:wfacp_localization.global.confirm_button_text,showCancelButton:!1}),!1}var o=r.editFieldVue(),n=new wfacp.ajax,d={steps:wfacp.tools.jsp(this.steps),fieldsets:e.fieldsets,address_order:o.addressOrder,wfacp_id:r.id,have_billing_address:e.have_billing_address,have_shipping_address:e.have_shipping_address,have_billing_address_index:e.have_billing_address_index,have_shipping_address_index:e.have_shipping_address_index,have_shipping_method:e.have_shipping_method,current_step:this.current_step};n.ajax("save_layout",d),wfacp.show_spinner(),n.success=function(e){wfacp.show_data_save_model(e.msg)}},addField:function(){r.modal_add_field.iziModal("open")},editField:function(e,t,a){var i=r.editFieldVue(),s=wfacp.tools.jsp(this.fieldsets[e][t].fields[a]);i.current_field_id=s.id,r.current_edit_field={step_name:e,index:a,section:t,field:s};if(-1<v.inArray(s.id,["address","shipping-address","product_switching","shipping-address","wysiwyg_editor"])||-1<v.inArray(s.type,[]))i.model_sub_title="",i.edit_model_field_label="",i.model_field_type="";else{"advanced"===s.field_type&&" | "+wfacp_localization.fields.field_types_label+" : "+s.type,i.edit_model_field_label=s.data_label,"wfacp_wysiwyg"!=s.type?i.model_sub_title=wfacp_localization.fields.field_id_slug+" : "+s.id:i.model_sub_title=wfacp_localization.fields.field_types_label+" : "+s.type}i.setData()},deleteCustomField:function(i,s,e){var l=this;wfacp.swal({text:wfacp_localization.fields.delete_c_field_sub_heading,title:wfacp_localization.fields.delete_c_field+" `"+e+"`?",type:"error",confirmButtonText:wfacp_localization.fields.yes_delete_the_field,cancelButtonText:wfacp_localization.global.cancel_button_text,showCancelButton:!0}).then(function(e){if(!wfacp.tools.hp(e,"value"))return!1;Vue.delete(l.input_fields[i],s),Vue.delete(l.available_fields[i],s);var t=new wfacp.ajax,a={section:i,index:s,wfacp_id:r.id};t.ajax("delete_custom_field",a),wfacp.show_spinner(),t.success=function(e){!0===e.status&&(r.addField(e.data),wfacp.show_data_save_model(e.msg))}})},addSection:function(e){r.step_name=e,r.field_index=null,r.modal_add_section.iziModal("setTitle","Add Section"),r.modal_add_section.iziModal("open")},editSection:function(e,t){r.step_name=e,r.field_index=t,r.modal_add_section.iziModal("setTitle","Edit Section"),r.modal_add_section.iziModal("open")},deleteSection:function(o,n){var d=this,r=wfacp.tools.jsp(this.fieldsets[o][n]),e=r.name,t=wfacp_localization.fields.section.delete.replace("{{section_name}}",e),a=wfacp.swal({text:t,type:"error",confirmButtonText:wfacp_localization.global.confirm_button_text,reverseButtons:!0});a.then(function(e){if(!wfacp.tools.hp(e,"value"))return!1;if(wfacp.tools.hp(r,"fields")&&0<wfacp.tools.ol(r.fields))for(var t=r.fields,a=0;a<t.length;a++){var i=t[a],s=i.id,l=i.field_type;Vue.set(d.input_fields[l],s,i)}Vue.delete(d.fieldsets[o],n),d.validateDependency()}),a.catch(function(e){})},showFieldContainerPlaceholder:function(e,t){var a=v(".template_field_container."+e+"[field-index="+t+"]");0<a.length&&0===a.find(".wfacp_item_drag").length&&a.find(".template_field_placeholder_tbl").show()},hideFieldContainerPlaceholder:function(e,t){var a=v(".template_field_container."+e+"[field-index="+t+"]");0<a.length&&a.find(".template_field_placeholder_tbl").hide()},showHideGlobalDependency:function(e){var t=this.global_dependency_messages;if(0<wfacp.tools.ol(t))for(var a in t){var i=t[a];if(wfacp.tools.hp(i,"id"))wfacp.tools.hp(e,i.id)?t[a].show="no":t[a].show="yes";else if(wfacp.tools.hp(i,"ids")){for(var s=i.ids,l=[],o=0;o<s.length;o++)wfacp.tools.hp(e,s[o])&&l.push(s[o]);0===l.length?t[a].show="yes":t[a].show="no"}}wfacp.hooks.doAction("show_hide_global_dependency",t)},remove_dependency_messages:function(t){var a=this,e=new wfacp.ajax,i=this.global_dependency_messages[t],s="self";wfacp.tools.hp(i,"is_global")&&wfacp.tools.string_to_bool(i.is_global)&&(s="global");var l={index:t,wfacp_id:r.id,message_type:s};e.ajax("hide_notification",l),e.success=function(e){Vue.delete(a.global_dependency_messages,t)}},validateDependency:function(){var n=this;setTimeout(function(){var e=wfacp.tools.jsp(n.fieldsets),t={};for(var a in e){var i=e[a];if(0!==i.length)for(var s in i){var l=i[s].fields;if(0!==l.length)for(var o=0;o<l.length;o++){t[l[o].id]=1}}}n.showHideGlobalDependency(t)})}},data:{current_step:this.builder.layout.current_step,steps:this.steps,fieldsets:this.fieldsets,input_fields:this.input_fields,available_fields:this.available_fields,required_fields:wfacp_localization.fields.input_field_error,error:[],noofstep:1,error_msg:{},global_dependency_messages:this.builder.global_dependency_messages}}),this.layout_vue}},{key:"defaultStepObj",value:function(e){return{name:"Step",slug:"step_"+e,friendly_name:"Step "+e,active:"yes"}}},{key:"dragStart",value:function(e){wfacp.addClass(".wfacp_field_container","activate_dragging_field"),e.dataTransfer.setData("unique_id",e.target.id),e.dataTransfer.setData("section_name",e.target.getAttribute("data-input-section"))}},{key:"dragEnd",value:function(){wfacp.removeClass(".wfacp_field_container","activate_dragging_field"),wfacp.removeClass(".wfacp_field_container","highlight_field_container")}},{key:"drop",value:function(e){e.preventDefault();var t=e.dataTransfer.getData("unique_id");if(t===e.target.id)return!1;var a=e.dataTransfer.getData("section_name");return this.layout_vue.enableSortable(),[t,a]}},{key:"allowDrop",value:function(e){e.preventDefault()}},{key:"dragEnter",value:function(e){v(e.target).parents(".wfacp_field_container").removeClass(e.target,"activate_dragging_field"),v(e.target).parents(".wfacp_field_container").addClass("highlight_field_container")}},{key:"dragLeave",value:function(e){v(e.target).parents(".wfacp_field_container").addClass(e.target,"activate_dragging_field"),v(e.target).parents(".wfacp_field_container").removeClass("highlight_field_container")}},{key:"getSection",value:function(e,t){return wfacp.tools.hp(this.layout_vue.fieldsets,e)&&wfacp.tools.hp(this.layout_vue.fieldsets[e],t)?wfacp.tools.jsp(this.layout_vue.fieldsets[e][t]):null}},{key:"addSection",value:function(e,t){var a=1<arguments.length&&void 0!==t?t:{};if(0===wfacp.tools.ol(a))return!1;!1===wfacp.tools.hp(this.layout_vue.fieldsets,this.step_name)&&Vue.set(this.layout_vue.fieldsets,this.step_name,[]);var i=wfacp.tools.jsp(this.layout_vue.fieldsets[this.step_name]);i.push({name:a.name,class:a.class,sub_heading:a.sub_heading,fields:[]}),Vue.set(this.layout_vue.fieldsets,this.step_name,i),this.layout_vue.enableSortable()}},{key:"updateSection",value:function(e,t,a){var i=2<arguments.length&&void 0!==a?a:{};if(0===wfacp.tools.ol(i))return!1;if(wfacp.tools.hp(this.layout_vue.fieldsets,e)&&wfacp.tools.hp(this.layout_vue.fieldsets[e],t)){var s=wfacp.tools.jsp(this.layout_vue.fieldsets[e][t]);return s.name=i.name,s.class=i.class,s.sub_heading=i.sub_heading,Vue.set(this.layout_vue.fieldsets[e],t,s),!0}return!1}},{key:"addField",value:function(e){if(0<wfacp.tools.ol(e)){var t=e.unique_id,a=e.field_type;Vue.set(this.layout_vue.input_fields[a],t,e),Vue.set(this.layout_vue.available_fields[a],t,e)}}},{key:"getAddressFields",value:function(){var e=[{type:"label",label:wfacp_localization.fields.show_field_label1,styleClasses:"wfacp_show_field_lable",visible:function(e){return!0===e.is_address}},{type:"label",label:wfacp_localization.fields.show_field_label2,styleClasses:"wfacp_show_field_lable",visible:function(e){return!0===e.is_address}},{type:"label",label:wfacp_localization.fields.show_field_label3,styleClasses:"wfacp_show_field_lable",visible:function(e){return!0===e.is_address}},{type:"switch",label:wfacp_localization.fields.address.first_name,model:"first_name",hint:"",textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,styleClasses:["wfacp_first_name"],visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"first_name_label",hint:wfacp_localization.fields.address.billing_address_last_name_hint,placeholder:wfacp_localization.fields.first_name_label,visible:function(e){return!0===e.is_address&&"address"===e.id},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"first_name_label",placeholder:wfacp_localization.fields.first_name_label,visible:function(e){return!0===e.is_address&&"shipping-address"===e.id},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.placeholder_field_label,model:"first_name_placeholder",placeholder:"First Name",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.last_name,model:"last_name",hint:"",textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,styleClasses:["wfacp_last_name"],visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"last_name_label",hint:wfacp_localization.fields.address.billing_address_last_name_hint,placeholder:"",visible:function(e){return!0===e.is_address&&"address"===e.id},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"last_name_label",placeholder:"",visible:function(e){return!0===e.is_address&&"shipping-address"===e.id},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"last_name_placeholder",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.company,model:"company",hint:"",styleClasses:["wfacp_company"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"company_label",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"company_placeholder",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.street_address1,model:"street_address1",hint:"",styleClasses:["wfacp_address_1"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"street_address_1_label",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"street_address_1_placeholder",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.street_address2,model:"street_address2",hint:"",styleClasses:["wfacp_address_2"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"street_address_2_label",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"street_address_2_placeholder",placeholder:"",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.city,hint:"",model:"address_city",styleClasses:["wfacp_city"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"address_city_label",placeholder:"City",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"address_city_placeholder",placeholder:"City",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.state,model:"address_state",styleClasses:["wfacp_state"],hint:"",textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"address_state_label",placeholder:"State",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"address_state_placeholder",placeholder:"State",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.zip,model:"address_postcode",hint:"",styleClasses:["wfacp_postcode"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.label,model:"address_postcode_label",placeholder:"Postcode",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"address_postcode_placeholder",placeholder:"Postcode",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.address.country,model:"address_country",hint:"",styleClasses:["wfacp_country"],textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,visible:function(e){return!0===e.is_address}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.lable,model:"address_country_label",placeholder:"USA",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.address.placeholder,model:"address_country_placeholder",placeholder:"USA",visible:function(e){return!0===e.is_address},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.same_as_billing,model:"same_as_billing",textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,styleClasses:"wfacp_full_width_fields",visible:function(e){return!0===e.is_address&&"shipping-address"===e.id}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.lable,model:"same_as_billing_label",hint:wfacp_localization.fields.same_as_billing_label_hint,styleClasses:"wfacp_full_width_input",placeholder:"USA",visible:function(e){return!0===e.is_address&&"shipping-address"===e.id},validator:VueFormGenerator.validators.string},{type:"switch",label:wfacp_localization.fields.same_as_shipping,model:"same_as_shipping",textOn:wfacp_localization.global.active,textOff:wfacp_localization.global.inactive,styleClasses:"wfacp_full_width_fields",visible:function(e){return!0===e.is_address&&"address"===e.id}},{type:"input",inputType:"text",label:wfacp_localization.fields.address.lable,model:"same_as_shipping_label",hint:wfacp_localization.fields.same_as_shipping_label_hint,styleClasses:"wfacp_full_width_input",placeholder:"USA",visible:function(e){return!0===e.is_address&&"address"===e.id},validator:VueFormGenerator.validators.string}];return wfacp.hooks.applyFilters("wfacp_address_fields",e)}},{key:"getEditableFields",value:function(){var e=[{type:"input",inputType:"text",label:wfacp_localization.fields.label_field_label,model:"label",required:!1,validator:VueFormGenerator.validators.string},{type:"checkbox",label:wfacp_localization.fields.order_summary_allow_delete,model:"allow_delete",hint:wfacp_localization.fields.order_summary_allow_delete_hint,styleClasses:"",visible:function(e){return"order_summary"===e.id}},{type:"input",inputType:"text",label:wfacp_localization.fields.options_field_label,model:"options",required:!0,validator:VueFormGenerator.validators.string,visible:function(e){return-1<v.inArray(e.field_type,["select","wfacp_radio","multiselect","select2"])}},{type:"input",inputType:"text",label:wfacp_localization.fields.multiselect_maximum_selection,model:"multiselect_maximum",validator:VueFormGenerator.validators.string,visible:function(e){return"multiselect"===e.field_type}},{type:"input",inputType:"text",label:wfacp_localization.fields.multiselect_maximum_error_field_label,model:"multiselect_maximum_error",validator:VueFormGenerator.validators.string,visible:function(e){return"multiselect"===e.field_type}},{type:"input",inputType:"text",label:wfacp_localization.fields.placeholder_field_label,model:"placeholder",validator:VueFormGenerator.validators.string,visible:function(e){return!(-1<v.inArray(e.field_type,["select","wfacp_radio","checkbox","hidden","date","address","product","wfacp_html","multiselect","wfacp_dob"])||!0===e.is_address)}},{type:"input",inputType:"text",label:wfacp_localization.fields.default_field_label,model:"default",validator:VueFormGenerator.validators.string,visible:function(e){return e.is_wfacp_field}},{type:"select",inputType:"select",label:wfacp_localization.fields.default_field_label,model:"default",selectOptions:{hideNoneSelectedText:!0},values:function(){return wfacp.tools.jsp(wfacp_localization.fields.default_field_checkbox_options)},visible:function(e){return"checkbox"===e.field_type}},{type:"checkbox",label:wfacp_localization.fields.show_on_thankyou,model:"show_custom_field_at_thankyou",styleClasses:"wfacp_required_cls",visible:function(e){return e.is_wfacp_field}},{type:"checkbox",label:wfacp_localization.fields.show_in_email,model:"show_custom_field_at_email",styleClasses:"wfacp_required_cls",visible:function(e){return e.is_wfacp_field}}];e=wfacp.hooks.applyFilters("wfacp_editable_fields",e);var t={type:"checkbox",label:wfacp_localization.fields.required_field_label,model:"required",styleClasses:"wfacp_required_cls",default:!0,visible:function(e){return"hidden"!==e.field_type&&!0!==e.is_address&&v.inArray(e.field_type,["product","wfacp_html"])<0}};e.push(t);return e.push({type:"checkbox",label:"wfacp_initiator_field",model:"temp_required",styleClasses:"wfacp_initiator_field",default:!0}),e}},{key:"updateField",value:function(e){if(0===wfacp.tools.ol(e))return!1;if(wfacp.tools.hp(this.layout_vue.fieldsets,e.step_name)&&wfacp.tools.hp(this.layout_vue.fieldsets[e.step_name][e.section],"fields")){var t={},a=wfacp.tools.jsp(e.field.options);if(0<wfacp.tools.ol(a)){for(var i in a){var s=a[i];t[s=s.trim()]=s}e.field.options=t}Vue.set(this.layout_vue.fieldsets[e.step_name][e.section].fields,e.index,e.field)}}},{key:"editFieldVue",value:function(){if(!0===this.edit_field_model_open)return this.edit_field_vue;this.edit_field_model_open=!0;var i=this;return this.edit_field_vue=new Vue({el:"#edit-field-form",components:{"vue-form-generator":VueFormGenerator.component},methods:{defaultModel:function(){return{field_type:"text",section_type:"billing",label:"",placeholder:"",cssready:"",options:"",is_address:!1,id:"",default:"",allow_delete:!1,is_wfacp_field:!1,required:!0}},enableAddressSortable:function(){var a=this;setTimeout(function(){v(".wfacp_address_sortable_area").sortable({items:"div.wfacp_sortable_address_field",cursor:"move",axis:"y",handle:".wfacp_drag_address_icon",scrollSensitivity:40,stop:function(e,t){a.AddressSortableStop(e,t)}}),v(document.body).off("click",".wfacp_drag_address_field_enable"),v(document.body).on("click",".wfacp_drag_address_field_enable",function(){v(this).hasClass("dashicons-visibility")?(v(this).removeClass("dashicons-visibility"),v(this).addClass("dashicons-hidden")):(v(this).removeClass("dashicons-hidden"),v(this).addClass("dashicons-visibility"))}),v(document.body).off("click",".wfacp_address_open_accordion"),v(document.body).on("click",".wfacp_address_open_accordion",function(){var e=v(this).parents(".wfacp_address_field").children(".wfacp_billing_accordion_content");v(this).hasClass("dashicons-arrow-up")?(e.slideUp(),v(this).removeClass("dashicons-arrow-up")):(e.slideDown(),v(this).addClass("dashicons-arrow-up"))}),v(document.body).on("change",".wfacp_address_type",function(){var e=v(this).parents(".wfacp_billing_accordion_content");v(this).is(":checked")?"radio"===v(this).val()?e.find(".wfacp_address_type_radio_container").addClass("wfacp_address_radio_container_show"):e.find(".wfacp_address_type_radio_container").removeClass("wfacp_address_radio_container_show"):e.find(".wfacp_address_type_radio_container").removeClass("wfacp_address_radio_container_show")})},800)},AddressSortableStop:function(){},setData:function(){var e=this,t=i.current_edit_field;if(0===wfacp.tools.ol(t))return!0;this.model.label=t.field.label,this.model.placeholder=void 0!==t.field.placeholder?t.field.placeholder:"",wfacp.tools.hp(t.field,"cssready")?this.model.cssready=t.field.cssready.join(","):this.model.cssready="",this.model.section_type=t.field.field_type,this.model.field_type=t.field.type,"multiselect"==this.model.field_type&&(this.model.multiselect_maximum=t.field.multiselect_maximum,this.model.multiselect_maximum_error=t.field.multiselect_maximum_error),this.model.is_wfacp_field=!!wfacp.tools.hp(t.field,"is_wfacp_field"),0<wfacp.tools.ol(t.field.options)?this.model.options=wfacp.tools.kys(t.field.options).join("|"):this.model.options="",this.model.default=t.field.default,this.model.required=wfacp.tools.string_to_bool(t.field.required),this.model.id=t.field.id,"order_summary"==this.model.id&&(this.model.allow_delete=!!wfacp.tools.hp(t.field,"allow_delete")&&wfacp.tools.string_to_bool(t.field.allow_delete)),"wfacp_wysiwyg"===this.model.field_type&&(this.model.required=!1),this.model=wfacp.hooks.applyFilters("wfacp_field_data_merge_with_model",this.model,t);var a=document.getElementById("wfacp-initiator-field");null!==a&&a.click(),setTimeout(function(){i.modal_edit_field.WoofunnelModal("open"),e.setAddressOrder()},100)},setAddressOrder:function(){if(wfacp.tools.hp(wfacp_data.address_order,this.model.id)){var e=wfacp_data.address_order[this.model.id],t=this.address_order_html[this.model.id];""!==t&&v("#wfacp_address_field_"+this.model.id).html(t),setTimeout(function(e){for(var t=0;t<e.length;t++){var a=e[t].key,i=e[t].status,s=e[t].label,l=v('.wfacp_address_field[data-key="'+a+'"]');if(0<l.length){var o=l.find(".wfacp_drag_address_field_enable");1==i||"true"==i?(o.removeClass("dashicons-hidden"),o.addClass('dashicons-visibility"')):(o.removeClass("dashicons-visibility"),o.addClass("dashicons-hidden")),l.find(".wfacp_label").val(s);var n=l.find(".wfacp_placeholder");0<n.length&&n.val(e[t].placeholder);var d=l.find(".wfacp_required");0<d.length&&(1==e[t].required||"true"==e[t].required?d.prop("checked",!0):d.prop("checked",!1))}}},200,e)}},saveAddressOrder:function(n){var i=this;return new Promise(function(e){if("address"===n.field.id||"shipping-address"===n.field.id){var t=v("#wfacp_address_field_"+n.field.id);if(0<t.length){var l=[],a=t.find(".wfacp_address_field"),o=i;a.each(function(){var e={key:v(this).data("key"),status:!1,label:v(this).find(".wfacp_label").val()},t=v(this).find(".wfacp_address_type:checked").val();o.addressOrder["display_type_"+n.field.id]=t;var a=v(this).find(".wfacp_label_2");0<a.length&&"radio"==t&&(e.label_2=a.val()),v(this).find(".wfacp_drag_address_field_enable").hasClass("dashicons-visibility")&&(e.status=!0);var i=v(this).find(".wfacp_placeholder");0<i.length&&(e.placeholder=i.val());var s=v(this).find(".wfacp_required");0<s.length&&(s.is(":checked")?e.required=!0:e.required=!1),l.push(e)}),o.addressOrder[n.field.id]=l,v(".wfacp_address_open_accordion").removeClass("dashicons-arrow-up"),v(".wfacp_billing_accordion_content").hide(),e(l)}}else e({})})},onSubmit:function(){var e=wfacp.tools.jsp(this.model),t=i.current_edit_field;t.field.label=e.label,t.field.placeholder=e.placeholder,t.field.cssready=e.cssready.split(","),t.field.type=e.field_type,t.field.field_type=e.section_type,t.field.options=e.options.split("|"),"multiselect"==t.field.type&&(t.field.multiselect_maximum=e.multiselect_maximum,t.field.multiselect_maximum_error=e.multiselect_maximum_error),"order_summary"==t.field.id&&(t.field.allow_delete=e.allow_delete),t.field.default="",wfacp.tools.hp(e,"default")&&(t.field.default=e.default),t.field.required=e.required,t=wfacp.hooks.applyFilters("wfacp_before_field_save",t,e),t=wfacp.tools.jsp(t),wfacp.tools.hp(t.field,"is_wfacp_field")&&"hidden"==t.field.type&&(t.field.required=!1),i.updateField(t),"address"!==t.field.id&&"shipping-address"!==t.field.id||(this.address_order_html[t.field.id]=v("#wfacp_address_field_"+t.field.id).html()),this.model=this.defaultModel(),this.saveAddressOrder(t).finally(function(){document.getElementById("wfacp_save_form_layout").click(),i.modal_edit_field.WoofunnelModal("close")})}},data:{product_switcher_updated:!1,wfacp_id:i.builder.id,current_field_id:"default",model_title:wfacp_localization.fields.add_field,addressOrder:wfacp_data.address_order,address_order_html:{address:"","shipping-address":""},model_sub_title:"",edit_model_field_label:"",model_field_type:"",model:{field_type:"text",section_type:"billing",options:"",default:"",label:"",placeholder:"",cssready:"",is_address:!1,is_wfacp_field:!1,allow_delete:!1,required:!0},schema:{groups:[{fields:i.getEditableFields()},{fields:i.getAddressFields()}]},formOptions:{validateAfterChanged:!0}}}),this.edit_field_vue}},{key:"addSectionVue",value:function(e){if(!0!==this.add_section_model_open){this.add_section_model_open=!0;var t=this;return this.add_section_vue=new Vue({el:"#add-section-form",components:{"vue-form-generator":VueFormGenerator.component},methods:{defaultModel:function(){return{name:"",classes:wfacp_localization.fields.section.default_classes,sub_heading:""}},clearData:function(){this.model=this.defaultModel()},setData:function(){var e=t.getSection(t.step_name,t.field_index);null!==e?(this.btn_name=wfacp_localization.global.update_btn,this.model.name=e.name,this.model.classes=e.class,this.model.sub_heading=e.sub_heading):this.btn_name=wfacp_localization.fields.add_new_btn},onSubmit:function(){var e=wfacp.tools.jsp(this.model);null==t.field_index?t.addSection(t.step_name,{name:e.name,class:e.classes,sub_heading:e.sub_heading}):t.updateSection(t.step_name,t.field_index,{name:e.name,class:e.classes,sub_heading:e.sub_heading}),this.model=this.defaultModel(),t.modal_add_section.iziModal("close")}},data:{modal:e,isLoading:!1,step_name:"single_step",btn_name:wfacp_localization.fields.section.add_heading,wfacp_id:t.builder.id,model:{name:"",classes:wfacp_localization.fields.section.default_classes,sub_heading:""},schema:{fields:[{type:"input",inputType:"text",label:wfacp_localization.fields.section.fields.heading,model:"name",required:!1,validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.section.fields.sub_heading,model:"sub_heading",validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.fields.section.fields.classes,model:"classes"}]},formOptions:{validateAfterChanged:!0}}}),this.add_section_vue}}},{key:"model",value:function(){var s=this;this.modal_edit_field=v("#modal-edit-field"),0<this.modal_edit_field.length&&(this.modal_edit_field.WoofunnelModal(),this.modal_edit_field.on("onopend",function(){var e=s.current_edit_field.field.id;"address"!==e&&"shipping-address"!==e||s.editFieldVue().enableAddressSortable()}),this.modal_edit_field.on("onopend",function(){setTimeout(function(){var e=v("#product_switching");0<e.length&&e.find(".wfacp_tabs .wfacp_tab_link").on("click",function(e){e.preventDefault(),v(".wfacp_tab_link").removeClass("activelink"),v(this).addClass("activelink");var t=v(this).data("tag");v(".wfacp_tab_container").removeClass("wfacp_tab_active").addClass("wfacp_tab_hide"),v(t).addClass("wfacp_tab_active").removeClass("wfacp_tab_hide")});var t=s.editFieldVue();0<wfacp.tools.ol(t.products)&&wfacp.tools.kys(t.products).forEach(function(e,t){var a="whats_included_"+e;wp.editor.remove(a);var i=wfacp.tools.jsp(wfacp.editorConfig);i.tinymce.init_instance_callback=function(a){a.on("Change",function(e){var t=a.targetElm.getAttribute("product_id");s.editFieldVue().products[t].whats_included=a.getContent()})},wp.editor.initialize(a,i)})},600),setTimeout(function(){if(0<v("#wfacp_wysiwyg_editor").length){var e="wfacp_wysiwyg_editor";wp.editor.remove(e);var t=wfacp.tools.jsp(wfacp.editorConfig);t.tinymce.init_instance_callback=function(a){a.on("Change",function(e){var t=s.editFieldVue();Vue.set(t.model,"default",a.getContent())})},wp.editor.initialize(e,t)}})}),this.modal_edit_field.on("onclosed",function(){var e=s.editFieldVue();if(e.products=e.products_updated,0<v("#wfacp_wysiwyg_editor").length){wp.editor.remove("wfacp_wysiwyg_editor")}})),this.modal_add_section=v("#modal-add-section"),0<this.modal_add_section.length&&this.modal_add_section.iziModal({headerColor:"#6dbe45",background:"#efefef",borderBottom:!1,width:600,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInDown",transitionOut:"fadeOutDown",navigateArrows:"false",onOpening:function(e){e.startLoading()},onOpened:function(e){e.stopLoading(),s.addSectionVue(e),s.add_section_vue.setData()},onClosed:function(){s.add_section_vue.clearData()}})}}]),t}(),i=function(){function t(e){_classCallCheck(this,t),null!=document.getElementById("wfacp_design_container")&&(this.id=e.id,this.selected=e.design.selected,this.selected_type=e.design.selected_type,this.designs=e.design.designs,this.design_types=e.design.design_types,this.description="",this.template_active=e.design.template_active,this.selected_template=this.designs[this.selected_type][this.selected],this.main(),this.design_settings(),this.model()),this.jQuery()}return _createClass(t,[{key:"main",value:function(){var n=this;return wfacp.tools.hp(this.designs,this.selected_type)&&wfacp.tools.hp(this.designs[this.selected_type],this.selected)||(this.selected_type="pre_built",this.selected="shopcheckout"),this.main=new Vue({el:"#wfacp_design_container",methods:{get_page_title:function(){return wfacp_data.name},get_edit_link:function(){return wfacp_data.template_edit_url[this.selected_type].url},get_button_text:function(){return wfacp_data.template_edit_url[this.selected_type].button_text},get_customizer_form_link:function(){return wfacp_data.template_edit_url.embed_forms.url},get_customizer_form_button_text:function(){return wfacp_data.template_edit_url.embed_forms.button_text},setTemplateType:function(e){Vue.set(this,"current_template_type",e)},setTemplate:function(e,t,a){var i=2<arguments.length&&void 0!==a?a:"";return Vue.set(this,"selected",e),Vue.set(this,"selected_type",t),wfacp.hooks.doAction("wfacp_set_template",e,t),this.template_active="yes",this.save("yes",i)},removeDesign:function(t){var e=new wfacp.ajax,a={wfacp_id:n.id};e.ajax("remove_design",a),wfacp.show_spinner(),e.success=function(e){wfacp_data.layout.current_step="single_step","function"==typeof t&&t(e)},e.error=function(e){}},showFailedImport:function(e){wfacp.swal({html:e,title:wfacp_localization.importer.failed_import,type:"warning",allowEscapeKey:!0,showCancelButton:!1,confirmButtonText:wfacp_localization.importer.close_prompt_text})},importTemplate:function(i,e,s){var t=this,a=new wfacp.ajax,l={builder:e,template:i.slug,wfacp_id:n.id,is_multi:"yes"===i.multistep?"yes":"no"};a.ajax("import_template",l),wfacp.show_spinner(),this.swalLoadingText(builder.wfacp_i18n.importing),a.success=function(a){!0===a.status?""!==i.thumbnail?(t.setTemplate(i.slug,e),setTimeout(function(){var t=v(".wfacp_template_preview_container");t.find(".wfacp_template_importing_loader").show();var e=new Image;e.src=i.thumbnail,e.onload=function(){setTimeout(function(e){t.find(".wfacp_template_importing_loader").hide()},1e3,a)};v(".wfacp_templates_inner.wfacp_selected_designed");s(a)},300)):s(a):(setTimeout(function(e){t.showFailedImport(e)},200,a.msg),s(a))}},get_remove_template:function(){var a=this;wfacp.swal({title:wfacp_localization.importer.remove_template.heading,type:"warning",allowEscapeKey:!1,confirmButtonText:wfacp_localization.importer.remove_template.button_text,text:wfacp_localization.importer.remove_template.sub_heading,showLoaderOnConfirm:!0,preConfirm:function(){return v("button.swal2-cancel.swal2-styled").css({display:"none"}),new Promise(function(t){a.removeDesign(function(e){a.template_active="no",t(e)})})}})},maybeInstallPlugin:function(e,t,a){var i=this;this.cb=a,this.selected_template=e;var s=builder.pageBuildersOptions[this.current_template_type].plugins,l=0;v.each(s,function(e,t){"install"===t.status&&(i.swalLoadingText(builder.wfacp_i18n.plugin_install),l++,window.wp.updates.queue.push({action:"install-plugin",data:{slug:t.slug}}))}),window.wp.updates.queueChecker(),0===l&&v.each(s,function(e,t){"activate"===t.status&&i.activatePlugin(t.init)})},afterInstall:function(e,a){var i=this,t=builder.pageBuildersOptions[this.current_template_type].plugins;v.each(t,function(e,t){"install"===t.status&&a.slug===t.slug&&i.activatePlugin(t.init)})},swalLoadingText:function(e){0===v(".swal2-actions.swal2-loading .loading-text").length&&v(".swal2-actions.swal2-loading").append("<div class='loading-text'></div>"),v(".swal2-actions.swal2-loading .loading-text").text(e)},activatePlugin:function(e){var t=new wfacp.ajax,i=this;i.swalLoadingText(builder.wfacp_i18n.plugin_activate);var a={plugin_init:e};t.ajax("activate_plugin",a),wfacp.show_spinner(),t.success=function(a){i.importTemplate(i.selected_template,i.current_template_type,i.cb);var e=builder.pageBuildersOptions[i.current_template_type].plugins;v.each(e,function(e,t){t.init===a.init&&("install"!==t.status&&"activate"!==t.status||(builder.pageBuildersOptions[i.current_template_type].plugins[e].status=null))})},t.error=function(e){}},triggerImport:function(t,e,a,i){var s=this;wfacp_localization.importer.activate_template.heading,wfacp_localization.importer.activate_template.sub_heading,wfacp_localization.importer.activate_template.button_text;"yes"===t.show_import_popup&&(wfacp_localization.importer.add_template.heading,wfacp_localization.importer.add_template.sub_heading,wfacp_localization.importer.add_template.button_text);var l=!0,o=v(i.target),n=o.closest(".wfacp_template_sec");if(!_.isUndefined(builder.pageBuildersOptions[this.current_template_type])){var d=builder.pageBuildersOptions[this.current_template_type].plugins;v.each(d,function(e,t){l&&("install"!==t.status&&"activate"!==t.status||(l=!1))})}if(!1!==l)if(v(".wfacp_steps_btn_green").hide(),o.closest(".wfacp_temp_middle_align").find(".wfacp_import_template").show(),o.closest(".wfacp_template_sec").hasClass("wfacp_template_importing"))console.log("Importer already running");else{n.addClass("wfacp_template_importing");var r=function(){n.removeClass("wfacp_template_importing"),v(".wfacp_steps_btn_green").show()};"yes"===t.multistep||"yes"===t.import?this.importTemplate(t,a,r):this.setTemplate(e,a,r)}else wfacp.swal({title:builder.pageBuildersTexts[this.current_template_type].title,type:"warning",allowEscapeKey:!1,confirmButtonText:builder.pageBuildersTexts[this.current_template_type].ButtonText,showCancelButton:!0,cancelButtonText:builder.pageBuildersTexts[this.current_template_type].close_btn,allowOutsideClick:!1,cancelButtonColor:"#e33b3b",html:builder.pageBuildersTexts[this.current_template_type].text,showLoaderOnConfirm:!0,preConfirm:function(){if("no"===builder.pageBuildersTexts[s.current_template_type].noInstall)return v("button.swal2-cancel.swal2-styled").css({display:"none"}),new Promise(function(e){s.maybeInstallPlugin(t,a,e)})},onClose:function(){n.removeClass("wfacp_template_importing"),v(".wfacp_steps_btn_green").show()}})},save:function(e,t){var a=this,i=0<arguments.length&&void 0!==e?e:"yes",s=1<arguments.length&&void 0!==t?t:"",l=new wfacp.ajax,o={selected_type:this.current_template_type,selected:this.selected,wfacp_id:n.id,template_active:i};l.ajax("save_design",o),wfacp.show_spinner(),l.success=function(e){wfacp.show_data_save_model(e.msg),a.selected_type=a.current_template_type,a.selected_template=a.designs[a.selected_type][a.selected],v("#wfacp_control > .wfacp_p20_noside").show(),"function"==typeof s&&s(e),v(".wfacp_design_accordion").attr("status","close")}}},data:{current_template_type:this.selected_type,selected_type:this.selected_type,designs:this.designs,design_types:this.design_types,selected:this.selected,selected_template:this.selected_template,template_active:this.template_active,temp_template_type:"",temp_template_slug:"",description:this.description}}),this.main}},{key:"design_settings",value:function(){for(var a=this,e={wfacp_form_section_embed_forms_2_name_0:function(e){return"true"==e.wfacp_form_section_embed_forms_2_disable_steps_bar},wfacp_form_section_embed_forms_2_headline_0:function(e){return"true"==e.wfacp_form_section_embed_forms_2_disable_steps_bar},wfacp_form_section_embed_forms_2_step_heading_font_size:function(e){return!wfacp.tools.string_to_bool(e.wfacp_form_section_embed_forms_2_disable_steps_bar)},wfacp_form_section_embed_forms_2_step_sub_heading_font_size:function(e){return!wfacp.tools.string_to_bool(e.wfacp_form_section_embed_forms_2_disable_steps_bar)},wfacp_form_section_embed_forms_2_step_alignment:function(e){return!wfacp.tools.string_to_bool(e.wfacp_form_section_embed_forms_2_disable_steps_bar)},wfacp_form_section_embed_forms_2_active_step_bg_color:function(e){return!wfacp.tools.string_to_bool(e.wfacp_form_section_embed_forms_2_disable_steps_bar)},wfacp_form_section_embed_forms_2_active_step_text_color:function(e){return!wfacp.tools.string_to_bool(e.wfacp_form_section_embed_forms_2_disable_steps_bar)},wfacp_form_section_embed_forms_2_active_step_tab_border_color:function(e){return!wfacp.tools.string_to_bool(e.wfacp_form_section_embed_forms_2_disable_steps_bar)}},t=wfacp_design_settings.schema,i=0;i<t.length;i++)if(wfacp.tools.hp(t[i],"fields"))for(var s=t[i].fields,l=0;l<s.length;l++){var o=s[l];if(wfacp.tools.hp(o,"model")){var n=o.model;wfacp.tools.hp(e,n)&&(wfacp_design_settings.schema[i].fields[l].visible=e[n])}}wfacp_design_settings.model.wfacp_form_section_embed_forms_2_disable_steps_bar=wfacp.tools.string_to_bool(wfacp_design_settings.model.wfacp_form_section_embed_forms_2_disable_steps_bar),this.design_settings=new Vue({el:"#wfacp_design_setting",components:{"vue-form-generator":VueFormGenerator.component},created:function(){this.enable_color_picker(),setTimeout(function(){v(".wfacp_design_accordion").attr("status","close")},200)},data:{model:wfacp_design_settings.model,schema:{groups:wfacp_design_settings.schema}},methods:{onChange:function(){var e=this;setTimeout(function(){e.enable_color_picker()},100)},selected_template_type:function(){return a.main.current_template_type},template_active:function(){return a.main.template_active},enable_color_picker:function(){var i=this;setTimeout(function(){var e=v(".wfacp_color_field .form-control");0<e.length&&(e.wpColorPicker({change:function(e,t){var a=e.target.id;i.model[a]=t.color.toString()}}),e.trigger("change"),v('.wfacp_color_field .wp-picker-container input[type="text"], .button.wp-color-result').on("click",function(){v(".iris-picker").hide(),v(this).parent().parent().parent().addClass("wp-picker-active"),v(this).parent().parent().parent().find(".button.wp-color-result").addClass("wp-picker-open"),v(this).parent().parent().parent().find(".iris-picker.iris-border").css("display","block")}),v(document).on("click",function(){0<v(".iris-picker:visible").length&&v(".iris-picker").hide()}))},1200)},onSubmit:function(){var e=wfacp.tools.jsp(this.model),t=new wfacp.ajax;return t.ajax("save_design_settings",{wfacp_id:a.id,settings:e}),wfacp.show_spinner(),t.success=function(e){wfacp.show_data_save_model(e.msg)},wfacp_data.name}}})}},{key:"model",value:function(){this.show_design_model=v("#modal-show-design-template"),0<this.show_design_model.length&&this.show_design_model.iziModal({headerColor:"#6dbe45",background:"#efefef",borderBottom:!1,width:600,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInDown",transitionOut:"fadeOutDown",navigateArrows:"false",onOpening:function(e){e.startLoading()},onOpened:function(e){e.stopLoading()},onClosed:function(){}}),v(document.body).on("click",".wfacp_embed_form_tab",function(){var e=v(this).attr("aria-controls");v(".wfacp_embed_form_tab").removeClass("wfacp-active"),v(this).addClass("wfacp-active"),v(".wfacp_embed_fieldset").hide(),v(".wfacp_embed_fieldset."+e).show()}),v(document.body).on("click",".wfacp_embed_form_design_tab",function(){var e=v(this).data("tab");v(".wfacp_embed_form_design_tab").removeClass("wfacp-active"),v(this).addClass("wfacp-active");var t=v(".wfacp_show_design_style_fields");t.hide(),t.hasClass(e)&&v("."+e).show()}),v(document.body).on("click",".wfacp_design_accordion .wfacp_main_design_heading",function(){var e=v(this).attr("status");v(this).parent(".wfacp_design_accordion").removeClass("wfacp_accordion_open"),"close"==e||null==e?(v(this).parent(".wfacp_design_accordion").find(".form-group").slideDown(),v(this).parent(".wfacp_design_accordion").attr("status","open"),v(this).attr("status","open"),v(this).parent(".wfacp_design_accordion").addClass("wfacp_accordion_open")):"open"==e&&(v(this).parent(".wfacp_design_accordion").find(".form-group").not(".wfacp_main_design_heading").slideUp(),v(this).attr("status","close"),v(this).parent(".wfacp_design_accordion").attr("status","close"))})}},{key:"jQuery",value:function(){var a=this;v(document).on("wp-plugin-install-success",function(e,t){a.main.afterInstall(e,t)}),v(document).on("click",".wfacp_filter_container_inner",function(){v(".wfacp_filter_container_inner").removeClass("wfacp_selected_filter");var e=v(this).data("filter-type"),t=v(".wfacp_temp_card");(v(this).addClass("wfacp_selected_filter"),0!=e)?(t.hide(),v(".wfacp_temp_card[data-steps="+e+"]").show()):t.show()})}}]),t}(),s=function(){function t(e){_classCallCheck(this,t),null!=document.getElementById("modal-checkout-page")&&(this.add_new_model_open=!1,this.id=wfacp.tools.hp(e,"id")?e.id:0,this.name=wfacp.tools.hp(e,"name")?e.name:"",this.post_name=wfacp.tools.hp(e,"post_name")?e.post_name:"",this.post_content=wfacp.tools.hp(e,"post_content")?e.post_content:"",this.base_url=wfacp.tools.hp(e,"base_url")?e.base_url:"",this.model())}return _createClass(t,[{key:"main",value:function(e){if(!1===this.add_new_model_open){var s=this;return this.add_new_model_open=!0,this.add_new=new Vue({el:"#add-new-form",components:{"vue-form-generator":VueFormGenerator.component},methods:{defaultModel:function(){return{name:"",post_content:""}},clearData:function(){this.model=this.defaultModel()},onSubmit:function(){var t=this;this.modal.startLoading();var e=this.model.name,a=new wfacp.ajax,i={wfacp_name:e,wfacp_id:s.id,post_name:this.model.post_name,post_content:this.model.post_content};a.ajax("add_checkout_page",i),a.success=function(e){!0===e.status&&"#"!==e.redirect_url&&(t.modal.stopLoading(),v("#add-new-form").hide(),v(".wfacp-funnel-create-success-wrap").show(),setTimeout(function(){window.location.href=e.redirect_url},1e3)),0<s.id&&(t.modal.stopLoading(),s.add_new_page_model.iziModal("close"),wfacp_data.name=t.model.name,v(".wfacp_page_title").text(t.model.name),v(".bwf-header-bar .bwf-bar-navigation > span:last-child").html(t.model.name),v(".wfacp-preview").attr("href",e.new_url))}}},data:{modal:e,btn_name:0<this.id?wfacp_localization.global.update_btn:wfacp_localization.global.add_checkout_btn,model:{id:this.id,name:s.name,post_name:s.post_name,post_url:s.post_url,base_url:s.base_url,post_content:s.post_content},schema:{fields:[{type:"input",inputType:"text",label:wfacp_localization.global.add_checkout.heading,model:"name",required:!0,validator:VueFormGenerator.validators.string},{type:"textArea",label:wfacp_localization.global.add_checkout.post_content,model:"post_content",validator:VueFormGenerator.validators.string},{type:"input",inputType:"text",label:wfacp_localization.global.add_checkout.checkout_url_slug,model:"post_name",required:!0,validator:VueFormGenerator.validators.string,visible:function(e){return 0<e.id}}]},formOptions:{validateAfterChanged:!0}}}),this.add_new}}},{key:"model",value:function(){var e,l,t,a=this;function o(e){return decodeURIComponent(e.replace(t," "))}e=jQuery,l=/([^&=]+)=?([^&]*)/g,t=/\+/g,e.parseParams=function(e){for(var t,a={};t=l.exec(e);){var i=o(t[1]),s=o(t[2]);"[]"===i.substring(i.length-2)?(a[i=i.substring(0,i.length-2)]||(a[i]=[])).push(s):a[i]=s}return a},v(".woofunnels_page_wfacp .icl_translations a").on("click",function(e){if(0<v(this).find(".otgs-ico-add").length){var t=v(this).attr("href");if(t=t.replace("post-new.php?",""),e.preventDefault(),"object"==_typeof(t=v.parseParams(t))&&0<wfacp.tools.ol(t)){e.preventDefault();var a=new wfacp.ajax;a.ajax("make_wpml_duplicate",t),a.success=function(e){1==e.status?window.location.href=e.redirect_url:alert(e.msg)}}}}),this.add_new_page_model=v("#modal-checkout-page"),0<this.add_new_page_model.length&&this.add_new_page_model.iziModal({title:0<this.id?wfacp_localization.global.edit_checkout_page:wfacp_localization.global.add_checkout_page,headerColor:"#6dbe45",background:"#efefef",borderBottom:!1,width:600,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInDown",transitionOut:"fadeOutDown",navigateArrows:"false",onOpening:function(e){e.startLoading()},onOpened:function(e){e.stopLoading(),a.main(e)}})}}]),t}(),l=function(){function t(e){_classCallCheck(this,t),this.id=e.id,this.settings=e.settings,null!=document.getElementById("wfacp_setting_container")&&this.main()}return _createClass(t,[{key:"getFields",value:function(){var e=[{fields:[{type:"label",label:wfacp_localization.settings.analytics.heading,hint:wfacp_localization.settings.analytics.hint,styleClasses:"wfacp_setting_heading"},{type:"radios",inputType:"text",label:wfacp_localization.settings.analytics.override,default:"false",model:"override_global_track_event",disabled:"true",values:function(){return wfacp_localization.settings.radio_fields}}]},{fields:[{type:"label",label:wfacp_localization.settings.scripts.heading,hint:wfacp_localization.settings.scripts.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"textArea",label:wfacp_localization.settings.scripts.header_heading,placeholder:wfacp_localization.settings.scripts.header_script_placeholder,model:"header_script",rows:4,validator:VueFormGenerator.validators.string},{type:"textArea",label:wfacp_localization.settings.scripts.footer_heading,placeholder:wfacp_localization.settings.scripts.footer_script_placeholder,model:"footer_script",rows:4,validator:VueFormGenerator.validators.string}]},{fields:[{type:"label",label:wfacp_localization.settings.style.heading,hint:wfacp_localization.settings.style.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"textArea",label:wfacp_localization.settings.style.header_heading,placeholder:wfacp_localization.settings.style.header_style_placeholder,model:"header_css",rows:4,validator:VueFormGenerator.validators.string}]}];return wfacp.hooks.applyFilters("wfacp_settings_fields",e,this)}},{key:"getModels",value:function(){var e=wfacp.tools.jsp(this.settings);return e=wfacp.hooks.applyFilters("wfacp_settings_data_model",e,this)}},{key:"main",value:function(){var i=this;return this.settings_vue=new Vue({el:"#wfacp_setting_container",components:{"vue-form-generator":VueFormGenerator.component,Multiselect:window.VueMultiselect.default},methods:{changed:function(){setTimeout(function(){v(".wfacp_date_field .form-control").attr("type","date")},100)},save:function(){var e=new wfacp.ajax,t=wfacp.tools.jsp(this.model);""!==t.close_checkout_on&&0<t.close_checkout_on&&(t.close_checkout_on=parseInt(t.close_checkout_on/1e3));var a={wfacp_id:i.id,settings:t};e.ajax("save_settings",a),wfacp.show_spinner(),e.success=function(e){wfacp.show_data_save_model(e.msg)}}},data:{search_timeout:!1,isLoading:!1,model:this.getModels(),formOptions:{},schema:{groups:this.getFields()}}}),this.settings_vue}}]),t}(),o=function(){function t(e){_classCallCheck(this,t),null!=document.getElementById("wfacp_optimization_container")&&(this.settings=e.settings,this.id=e.id,this.preview_field(),this.main())}return _createClass(t,[{key:"preview_field",value:function(){if(0!=wfacp.tools.hp(wfacp_data,"layout")){var f=wfacp_data.layout,r={single_step:[],two_step:[],third_step:[]},t=["product","wfacp_html","wfacp_end_divider","password","wfacp_start_divider"],u=[];"two_step"===wfacp_data.layout.current_step?u=["single_step"]:"third_step"===wfacp_data.layout.current_step&&(u=["single_step","two_step"]),wfacp.hooks.addFilter("wfacp_optimization_preview_fields",function(e){if(0===u.length){var t={type:"label",label:wfacp_localization.settings.preview_field_admin_heading,hint:wfacp_localization.settings.preview_field_admin_heading_hint,styleClasses:"wfacp_setting_heading wfacp_admin_preview_feilds_wrap"},a={type:"label",hint:wfacp_localization.settings.preview_field_admin_note,styleClasses:"wfacp_setting_heading wfacp_preview_note"};return e.push(t),e.push(a),e}var i={type:"label",label:wfacp_localization.settings.preview_field_admin_heading,hint:wfacp_localization.settings.preview_field_admin_heading_hint,styleClasses:"wfacp_setting_heading preview_heading_wrap"};e.push(i);for(var s=0;s<u.length;s++)for(var l=u[s],o=f.fieldsets[l],n=0;0<(n<o.length);n++){var d=o[n].fields;for(var r in d){var c=d[r];h(c)||e.push({type:"checkbox",label:""!==c.label?c.label:c.data_label,model:c.id,styleClasses:"wfacp_preview_fields"})}}if(1<e.length){var _={type:"input",inputType:"text",label:wfacp_localization.settings.preview_section_heading,model:"preview_section_heading",styleClasses:"preview_section_heading_wrap wfaco_preview_top_spacing",validator:VueFormGenerator.validators.string},p={type:"input",inputType:"text",label:wfacp_localization.settings.preview_section_subheading,model:"preview_section_subheading",styleClasses:"preview_section_subheading_wrap",validator:VueFormGenerator.validators.string};e.push(_),e.push(p)}return e}),wfacp.hooks.addFilter("wfacp_optimizations_data_model",function(e,t){if(0===u.length)return e;for(var a=0;a<u.length;a++)for(var i=u[a],s=f.fieldsets[i],l=0;0<(l<s.length);l++){var o=s[l].fields;for(var n in o){var d=o[n];h(d)||(wfacp.tools.hp(t.settings.show_on_next_step[i],d.id)&&"true"==t.settings.show_on_next_step[i][d.id]?e[d.id]=!0:e[d.id]=!1,r[i].push(d.id))}}return wfacp.tools.hp(t.settings,"preview_section_heading")&&(e.preview_section_heading=t.settings.preview_section_heading),wfacp.tools.hp(t.settings,"preview_section_subheading")&&(e.preview_section_subheading=t.settings.preview_section_subheading),e}),wfacp.hooks.addFilter("wfacp_before_optimization_data_saved",function(e,t){for(var a in e.settings.show_on_next_step={},r)if(0!==r[a].length){e.settings.show_on_next_step[a]={};for(var i=r[a],s=0;s<i.length;s++){var l=i[s];wfacp.tools.hp(e.settings,l)&&(e.settings.show_on_next_step[a][l]=e.settings[l],delete e.settings[l])}}return e})}function h(e){return-1<t.indexOf(e.type)&&"shipping_calculator"!==e.id}}},{key:"getFields",value:function(){var e=wfacp.hooks.applyFilters("wfacp_optimization_preview_fields",[],this),t=[{fields:[{type:"label",label:wfacp_localization.google_autocomplete.heading,hint:wfacp_localization.google_autocomplete.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.global.enable,model:"enable_google_autocomplete",disabled:"true",values:function(){return wfacp_localization.settings.radio_fields}}]},{fields:[{type:"label",label:wfacp_localization.settings.coupons.heading,hint:wfacp_localization.settings.coupons.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.settings.coupons.auto_add_coupon_heading,model:"enable_coupon",disabled:"true",values:function(){return wfacp_localization.settings.radio_fields}},{type:"radios",label:wfacp_localization.settings.coupons.disable_coupon,model:"disable_coupon",disabled:"true",values:function(){return wfacp_localization.settings.radio_fields}}]},{fields:[{type:"label",label:wfacp_localization.optimizations.smart_buttons.heading,hint:wfacp_localization.optimizations.smart_buttons.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.global.enable,model:"enable_smart_buttons",disabled:"true",values:function(){return wfacp_localization.settings.radio_fields}}]},{fields:e},{fields:[{type:"label",label:wfacp_localization.optimizations.preferred_country.heading,hint:wfacp_localization.optimizations.preferred_country.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.global.enable,model:"preferred_countries_enable",disabled:"true",values:function(){return wfacp_localization.settings.radio_fields}}]},{fields:[{type:"label",label:wfacp_localization.settings.advanced.heading,hint:wfacp_localization.settings.advanced.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.settings.advanced.close_after,model:"close_after_x_purchase",disabled:"true",values:function(){return wfacp_localization.settings.radio_fields}},{type:"radios",label:wfacp_localization.settings.advanced.close_checkout_after_date,model:"close_checkout_after_date",disabled:"true",values:function(){return wfacp_localization.settings.radio_fields}}]},{fields:[{type:"label",label:wfacp_localization.settings.autopopulate_fields.heading,hint:wfacp_localization.settings.autopopulate_fields.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.global.enable,model:"enable_autopopulate_fields",disabled:"true",values:function(){return wfacp_localization.settings.radio_fields}}]},{fields:[{type:"label",label:wfacp_localization.settings.autopopulate_state.heading,hint:wfacp_localization.settings.autopopulate_state.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"radios",label:wfacp_localization.global.enable,model:"enable_autopopulate_state",disabled:"true",values:function(){return wfacp_localization.settings.radio_fields}}]},{fields:[{type:"label",label:wfacp_localization.settings.auto_fill_url.heading,hint:wfacp_localization.settings.auto_fill_url.sub_heading,styleClasses:"wfacp_setting_heading"},{type:"input",inputType:"text",label:wfacp_localization.settings.auto_fill_url.product_ids,model:"auto_fill_url_product_ids",disabled:"true",hint:wfacp_localization.settings.auto_fill_url.product_ids_hint},{type:"input",inputType:"text",label:wfacp_localization.settings.auto_fill_url.quantity,model:"auto_fill_url_product_qty",disabled:"true",hint:wfacp_localization.settings.auto_fill_url.quantity_hint},{type:"select",model:"auto_fill_url_autoresponder",disabled:"true",label:wfacp_localization.settings.auto_fill_url.auto_responder_label,default:"activecampaign",selectOptions:{hideNoneSelectedText:!0},values:function(){return Object.values(wfacp_localization.settings.auto_fill_url.auto_responder_options)}},{type:"textArea",label:wfacp_localization.settings.auto_fill_url.perfill_url,model:"auto_fill_url_product_qty_url",disabled:"true",styleClasses:"auto_fill_url_product_qty_url",readonly:!0}]}];return wfacp.hooks.applyFilters("wfacp_optimization_fields",t,this)}},{key:"getModels",value:function(){var e=wfacp.tools.jsp(this.settings);return e=wfacp.hooks.applyFilters("wfacp_optimizations_data_model",e,this)}},{key:"main",value:function(){var r=this;this.settings_vue=new Vue({el:"#wfacp_optimization_container",components:{"vue-form-generator":VueFormGenerator.component},created:function(){setTimeout(function(){v(".wfacp_date_field .form-control").attr("type","date"),v(".auto_fill_url_product_qty_url  textarea").prop("readonly",!0)},100)},methods:{changed:function(){console.log("Hello"),setTimeout(function(){v(".wfacp_date_field .form-control").attr("type","date")},100)},prefil_url:function(){var e=[],t=r.settings_vue.model,a=t.auto_fill_url_product_ids,i=t.auto_fill_url_product_qty;void 0!==a&&""!==a&&(e.push(wfacp_data.parameters.add_to_checkout+"="+a),void 0!==i&&""!==i&&e.push(wfacp_data.parameters.qty+"="+i));var s=t.auto_fill_url_fields_options,l=wfacp.tools.jsp(wfacp_data.post_url);if(void 0!==t.auto_fill_url_autoresponder){var o=t.auto_fill_url_autoresponder,n=wfacp.tools.jsp(wfacp_localization.settings.auto_fill_url.auto_responder_options[o].merge_tags);if(void 0!==s&&0<s.length&&void 0!==n&&0<wfacp.tools.ol(n))for(var d in n)-1<s.indexOf(d)&&e.push(d+"="+n[d])}0<e.length&&(-1<l.indexOf("?")?l+="&"+e.join("&"):l+="?"+e.join("&"),r.settings_vue.model.auto_fill_url_product_qty_url=l,v(".auto_fill_url_product_qty_url textarea").val(l))},save:function(){console.log("Optimization")}},data:{model:this.getModels(),formOptions:{},schema:{groups:this.getFields()}}})}}]),t}(),n=function(){function t(e){_classCallCheck(this,t),this.id=e.id,this.schema=e.global_settings.schema,this.model=e.global_settings.model,null!=document.getElementById("wfacp_global_settings")&&this.main()}return _createClass(t,[{key:"main",value:function(){var i=this,a=this;for(var e in this.model)"true"===this.model[e]?this.model[e]=!0:"false"===this.model[e]&&(this.model[e]=!1);return this.settings_vue=new Vue({el:"#wfacp_global_settings",components:{"vue-form-generator":VueFormGenerator.component,Multiselect:window.VueMultiselect.default},created:function(){setTimeout(function(){v(".form-group.field-checkbox").each(function(){var e=v(this).find("label"),t=e.text();e.remove(),v(this).find(".field-wrap").append(t)});for(var e=0;e<i.schema.groups.length;e++)for(var t=i.schema.groups[e].fields,a=0;a<t.length;a++)wfacp.tools.hp(t[a],"hint")&&wfacp.tools.hp(t[a],"styleClasses")&&-1<t[a].styleClasses.indexOf("wfacp_html_hint")&&v("."+t[a].styleClasses.join(".")).find(".hint").html(t[a].hint)},1e3)},methods:{onSubmit:function(){var e=new wfacp.ajax,t={wfacp_id:a.id,settings:this.model};this.model.rewrite_slug!==wfacp_data.checkout_page_slug?(e.ajax("save_global_settings",t),wfacp.show_spinner(),e.success=function(e){wfacp.show_data_save_model(e.msg)}):alert(wfacp_data.checkout_page_slug_error)}},data:{model:this.model,search_timeout:!1,isLoading:!1,schema:this.schema,formOptions:{}}}),this.settings_vue}}]),t}(),t=function(){function t(e){_classCallCheck(this,t),this.el="#wfacp_control",this.setupData(e),this.initializeVue(),this.model()}return _createClass(t,[{key:"setupData",value:function(e){if(0<wfacp.tools.ol(e))for(var t in e)this[t]=e[t];wfacp.hooks.doAction("after_setup_data",this,e)}},{key:"initializeVue",value:function(){wfacp.products=new e(this),wfacp.fields=new a(this),wfacp.design=new i(this),wfacp.add_new_page=new s(this),wfacp.settings=new l(this),wfacp.optimization=new o(this),wfacp.global_settings=new n(this),this.jQuery_events(),wfacp.hooks.doAction("wfacp_loaded",this)}},{key:"getData",value:function(){return this.data}},{key:"jQuery_events",value:function(){if(v(".wfacp_checkout_page_status").on("change",function(e){var t=!1;v(this).is(":checked")&&(t=!0);var a=v(".wfacp_head_funnel_state_on"),i=v(".wfacp_head_funnel_state_off");t?(a.show(),i.hide()):(a.hide(),i.show());var s=v(this).data("id");(new wfacp.ajax).ajax("update_page_status",{post_status:t,id:s})}),v("#the-list .wfacp_funnels .wfacp-preview").on("click",function(){var t=this,e=v(this).attr("data-id"),a=v(this);if(a.addClass("disabled"),0<e){var i=new wfacp.ajax;i.ajax("preview_details",{wfacp_id:e}),i.success=function(e){!0===e.status&&v(t).WCBackboneModal({template:"wfacp-page-popup",variable:e}),a.removeClass("disabled")}}return!1}),0<v(".wfacp-product-widget-tabs").length){var e=v(".wfacp-product-widget-tabs .wfacp-tab-title");e.on("click",function(){var e=v(this).closest(".wfacp-product-widget-tabs"),t=v(this).attr("data-tab");e.find(".wfacp-tab-title").removeClass("wfacp-active"),e.find(".wfacp-tab-title[data-tab="+t+"]").addClass("wfacp-active"),v(e).find(".wfacp-tab-content").removeClass("wfacp-activeTab");var a=v(e).find(".wfacp_forms_global_settings .vue-form-generator fieldset");a.hide(),a.eq(t-1).addClass("wfacp-activeTab"),a.eq(t-1).show();var i=v(e).find(".wfacp_global_setting_inner .vue-form-generator fieldset");i.hide(),i.eq(t-1).addClass("wfacp-activeTab"),i.eq(t-1).show()}),e.eq(0).trigger("click")}v(".wfacp_delete_checkout_page").on("click",function(e){e.preventDefault();var t=v(this).attr("href"),a=wfacp.swal({text:wfacp_localization.global.delete_checkout_page,title:wfacp_localization.global.delete_checkout_page_head,type:"error",confirmButtonText:wfacp_localization.global.confirm_button_text,cancelButtonText:wfacp_localization.global.cancel_button_text});a.then(function(e){wfacp.tools.hp(e,"value")&&(window.location.href=t)}),a.catch(function(){})}),v(document).on("click",".wfacp_copy_text",function(){var e=v(this).siblings(".wfacp_description");0<e.length&&(e.find("input").select(),document.execCommand("copy"),wfacp.show_data_save_model(wfacp_localization.global.shortcode_copy_message))})}},{key:"model",value:function(){wfacp.show_saved_model=v("#modal-saved-data-success"),0!==wfacp.show_saved_model.length&&wfacp.show_saved_model.iziModal({title:wfacp_localization.global.data_saving,icon:"icon-check",headerColor:"#6dbe45",background:"#6dbe45",borderBottom:!1,width:600,timeout:4e3,timeoutProgressbar:!0,transitionIn:"fadeInUp",transitionOut:"fadeOutDown",bottom:0,loop:!0,pauseOnHover:!0,overlay:!1,onOpening:function(){var e=v(".wfacp_spinner.spinner");0<e.length&&e.css("visibility","hidden")},onClosed:function(){wfacp.show_saved_model.iziModal("setTitle",wfacp_localization.global.data_saving);var e=v(".wfacp_spinner.spinner");e.is(":visible")&&e.css("visibility","hidden")}})}}]),t}();v(window).on("load",function(){Vue.component("multiselect",window.VueMultiselect.default),window.builder=new t(wfacp_data),setTimeout(function(){v(".wfacp_loader").hide()},600),v(".wfacp_allow_panel_close .hndle").on("click",function(){v(this).parents(".wfacp_allow_panel_close").toggleClass("closed")});var e=v("a[data-original-link]");0<e.length&&e.each(function(){var e=v(this).data("original-link");v(this).attr("href",e)}),v(document.body).on("click",".wfacp_pro_feature_span",function(){var e=v(this).data("item");wfacp.show_pro_message(e)})});var d={init:function(){var t=this,e=v(this);setTimeout(function(e){e.find(".iziModal-button-close").on("click",function(){v(this).trigger("onclosed"),v("html").removeClass("iziModal-isAttached"),v(".wfacp_overlay").removeClass("wfacp_overlay_active"),e.fadeOut()}),v(t).trigger("oninit")},300,e)},open:function(){var i=this,s=v(this);setTimeout(function(){s.fadeIn(),s.addClass("hasScroll");var e=v(i).find(".iziModal-content").height(),t=v(window).height(),a=0;t<e?(e=t-20,v(i).find(".iziModal-wrap").height(e-75)):(a=s.find(".iziModal-noSubtitle").innerHeight(),s.find(".iziModal-wrap").height(e)),0<a?s.height(e+a):s.height(e),v("html").addClass("iziModal-isAttached"),v(".wfacp_overlay").addClass("wfacp_overlay_active")},150),v(this).trigger("onopend")},close:function(){v(this).trigger("onclosed"),v("html").removeClass("iziModal-isAttached"),v(".wfacp_overlay").removeClass("wfacp_overlay_active"),v(this).fadeOut()},setSubtitle:function(){}};v.fn.WoofunnelModal=function(e){return d[e]?d[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==_typeof(e)&&e?void v.error("Method "+e+" does not exist on jQuery.tooltip"):d.init.apply(this,arguments)}}(jQuery);