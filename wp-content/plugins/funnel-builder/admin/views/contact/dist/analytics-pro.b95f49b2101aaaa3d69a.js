(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{539:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(3),c=r(29),a=(r(248),r(15)),i=r(425),u=r(439),b=r(152),l=r(13);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var y=function(){var e=Object(b.a)("analyticsChart"),t=e.fetch,r=e.setStateProp;return f(f({},p(e,["fetch","setStateProp"])),{},{setStateProp:r,fetch:function(e,n,o,c){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];a?r("currentLoaded",!1):i&&r("previousLoaded",!1),t("GET",Object(l.c)("/woofunnels-analytics/funnels/"+parseInt(e)+"/stats/"),{after:n,before:o,interval:c},{isCurrent:a,isPrevious:i})}})},j=r(151);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var w=function(){var e=Object(j.a)("analyticsChart"),t=e.getStateProp;return v(v({},P(e,["getStateProp"])),{},{getCurrent:function(){return t("current")},getPrevious:function(){return t("previous")},getLoading:function(){var e=t("currentLoaded"),r=t("previousLoaded");return!e||!r}})};function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var _=function(){var e=Object(b.a)("analyticsSteps"),t=e.fetch;return h(h({},E(e,["fetch"])),{},{fetch:function(e,r,n,o){t("GET",Object(l.c)("/woofunnels-analytics/funnels/"+parseInt(e)+"/steps/"),{after:r,before:n,interval:o})}})};function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var x=function(){var e=Object(j.a)("analyticsSteps"),t=e.getStateProp;return k(k({},C(e,["getStateProp"])),{},{getSteps:function(){return t("steps")}})},I=r(10),q=[{key:"unique_visits",label:Object(o.__)("Visits","funnel-builder"),isCurrency:!1},{key:"total_orders",label:Object(o.__)("Orders","funnel-builder"),isCurrency:!1},{key:"total_revenue",label:Object(o.__)("Revenue","funnel-builder"),isCurrency:!0},{key:"revenue_per_visit",label:Object(o.__)("Revenue Per Visit","funnel-builder"),isCurrency:!0}];t.default=function(){var e=location&&location.search?Object(a.parse)(location.search.substring(1)):{},t=e.edit,r=y().fetch,b=w(),l=b.getError,s=b.getCurrent,f=b.getPrevious,O=b.getLoading,p=_().fetch,j=x(),g=j.getError,v=j.getSteps,d=j.getLoading,P=l(),m=g(),h=O(),S=d(),E=s(),D=f(),k=v(),L=e.period,C=e.compare,G=e.interval,J=e.after,N=e.before,R=Object(c.c)(e),T=G;return R.includes(G)||(T=R[R.length-1]),Object(n.useEffect)((function(){var n=Object(c.d)(e,"period=month&compare=previous_year"),o=n.primary,a=n.secondary;r(t,Object(c.a)(o.after,"start"),Object(c.a)(o.before,"end"),T||"day",!0,!1),r(t,Object(c.a)(a.after,"start"),Object(c.a)(a.before,"end"),T||"day",!1,!0),p(t,Object(c.a)(o.after,"start"),Object(c.a)(o.before,"end"))}),[L,C,G,J,N]),Object(n.createElement)(i.a,null,P&&Object(n.createElement)(I.Notice,{status:"error"},P.hasOwnProperty("message")?P.message:Object(o.__)("Unable to load analytics chart","funnel-builder")),m&&Object(n.createElement)(I.Notice,{status:"error"},m.hasOwnProperty("message")?m.message:Object(o.__)("Unable to load analytics steps","funnel-builder")),Object(n.createElement)(u.b,{query:e}),Object(n.createElement)(u.e,{error:P,query:e,metrics:q,data:{current:E,previous:D},isLoading:h}),Object(n.createElement)(u.a,{query:e,metrics:q,data:{current:E,previous:D},isLoading:h,interval:T}),Object(n.createElement)(u.d,{query:e,data:k,isLoading:S}))}}}]);