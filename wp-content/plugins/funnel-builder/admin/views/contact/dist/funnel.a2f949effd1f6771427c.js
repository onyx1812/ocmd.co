(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{149:function(e,t,n){"use strict";var r=n(0),c=n(10),a=n(67),l=n(1),i=n.n(l);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var c=p(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,e);var t,n,l,i=f(o);function o(){var e;return s(this,o),(e=i.apply(this,arguments)).onClick=e.onClick.bind(d(e)),e.onFocusFormToggle=e.onFocusFormToggle.bind(d(e)),e.onKeyDown=e.onKeyDown.bind(d(e)),e.container=Object(r.createRef)(),e}return t=o,(n=[{key:"onClick",value:function(e){var t=this.props,n=t.isClickable,r=t.onInvoke;n&&(e.preventDefault(),r())}},{key:"onKeyDown",value:function(e){e.target.isSameNode(e.currentTarget)&&(e.keyCode!==a.ENTER&&e.keyCode!==a.SPACE||(e.preventDefault(),this.props.onInvoke()),e.keyCode===a.UP&&e.preventDefault(),e.keyCode===a.DOWN&&(e.preventDefault(),(e.target.nextSibling||e.target.parentNode.querySelector(".bwf-ellipsis-menu__item")).focus()))}},{key:"onFocusFormToggle",value:function(){this.container.current.focus()}},{key:"render",value:function(){var e=this.props,t=e.checked,n=e.children;return e.isCheckbox?Object(r.createElement)("div",{"aria-checked":t,ref:this.container,role:"menuitemcheckbox",tabIndex:"0",onKeyDown:this.onKeyDown,onClick:this.onClick,className:"bwf-ellipsis-menu__item"},Object(r.createElement)(c.BaseControl,{className:"components-toggle-control"},Object(r.createElement)(c.FormToggle,{"aria-hidden":"true",checked:t,onChange:this.props.onInvoke,onFocus:this.onFocusFormToggle,onClick:function(e){return e.stopPropagation()},tabIndex:"-1"}),n)):Object(r.createElement)("div",{role:"menuitem",tabIndex:"0",onKeyDown:this.onKeyDown,onClick:this.onClick,className:"bwf-ellipsis-menu__item"},n)}}])&&u(t.prototype,n),l&&u(t,l),o}(r.Component);O.propTypes={checked:i.a.bool,children:i.a.node,isCheckbox:i.a.bool,isClickable:i.a.bool,onInvoke:i.a.func.isRequired},O.defaultProps={isClickable:!1,isCheckbox:!1},t.a=O},249:function(e,t,n){},414:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var r=n(8),c=n(147),a=n(0),l=n(11),i=n.n(l),o=n(443),s=n(426);var u={name:"8kj89b",styles:"flex-direction:row-reverse;"},b=Object(o.a)("div",{target:"eboqfv50",label:"Flex"})("box-sizing:border-box;display:flex;width:100%;",(function(e){var t=e.align,n={top:"flex-start",bottom:"flex-end"}[t]||t;return Object(s.b)({alignItems:n},"")})," ",(function(e){var t=e.justify,n=e.isReversed,r={left:"flex-start",right:"flex-end"},c=r[t]||t;return n&&r[t]&&(c="left"===t?r.right:r.left),Object(s.b)({justifyContent:c},"")})," ",(function(e){var t=e.gap,n=e.isReversed,r="number"==typeof t?4*t:4,c="margin-".concat(n?"left":"right");return Object(s.b)("> *{",c,":",r,"px;&:last-child{",c,":0;}}")})," ",(function(e){return e.isReversed?u:""}),""),f=Object(o.a)("div",{target:"eboqfv51",label:"Item"})({name:"13luw5d",styles:"box-sizing:border-box;min-width:0;max-width:100%;"}),m=Object(o.a)(f,{target:"eboqfv52",label:"Block"})({name:"1rr4qq7",styles:"flex:1;"});Object(a.forwardRef)((function(e,t){var n=e.className,l=Object(c.a)(e,["className"]),o=i()("components-flex__block",n);return Object(a.createElement)(m,Object(r.a)({},l,{className:o,ref:t}))}));var d=Object(a.forwardRef)((function(e,t){var n=e.className,l=Object(c.a)(e,["className"]),o=i()("components-flex__item",n);return Object(a.createElement)(f,Object(r.a)({},l,{className:o,ref:t}))}));var p=Object(a.forwardRef)((function(e,t){var n=e.align,l=void 0===n?"center":n,o=e.className,s=e.gap,u=void 0===s?2:s,f=e.justify,m=void 0===f?"space-between":f,d=e.isReversed,p=void 0!==d&&d,O=Object(c.a)(e,["align","className","gap","justify","isReversed"]),j=i()("components-flex",o);return Object(a.createElement)(b,Object(r.a)({},O,{align:l,className:j,ref:t,gap:u,justify:m,isReversed:p}))}))},448:function(e,t,n){},449:function(e,t,n){},450:function(e,t,n){},534:function(e,t,n){"use strict";n.r(t);var r=n(0),c=(n(448),n(15)),a=n(3),l=n(10),i=n(25),o=n.n(i),u=(n(449),n(13)),b=function(e){var t=e.steps,n=e.onStepSelected,c=Object(u.m)();return Object(r.createElement)("div",{className:"bwfabt_row"},Object(r.createElement)("div",{className:"wffn_step_list_wrap"},Object(r.createElement)("ul",{className:"wf_funnel_steps"},!!t&&Object.keys(t).map((function(e){var c=t[e],a="pro"in c&&!0===c.pro;return Object(r.createElement)("li",{onClick:function(){return!a&&n(c)},key:e,className:"wf_funnel_steps_li"},Object(r.createElement)("div",{className:"wf_funnel_check_wrap"}),Object(r.createElement)("div",{className:"wf_funnel_step_icon"},Object(r.createElement)(l.Icon,{icon:c.hasOwnProperty("dashicons")&&c.dashicons.split("dashicons-")[1],size:"38"})),Object(r.createElement)("div",{className:"wf_funnel_h5"},a&&Object(r.createElement)(l.Icon,{icon:"lock"}),c.title),Object(r.createElement)("div",{className:"clear"}))}))),!c&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-t-center wf_funnel_steps_txt"},"To unlock all the features, ",Object(r.createElement)("a",{href:"https://buildwoofunnels.com/exclusive-offer/"},"Upgrade to PRO"),"."))))},f=n(5),m=(n(450),n(1)),d=n.n(m);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,c=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){c=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(c)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=function(e){var t=e.onSearch,n=e.isLoading,c=e.items,i=e.onItemClick,o=e.error,s=e.blurText,u=p(Object(r.useState)(""),2),b=u[0],m=u[1],d=p(Object(r.useState)(!1),2),O=d[0],j=d[1],v=Object(r.useRef)(null),y=s||"",w=Object(r.useRef)();return Object(r.useEffect)((function(){jQuery("body").on("click",(function(e){jQuery(w.current).find(e.target).length>0?j(!0):j(!1)}))}),[]),Object(r.createElement)("div",{className:"bwf-select-auto-box",ref:w},n&&Object(r.createElement)(l.Spinner,null),Object(r.createElement)(l.TextControl,{autoComplete:"off",value:O?b:y,onChange:function(e){return m(n=e),v.current&&clearTimeout(v.current),void(v.current=setTimeout((function(){return t(n)}),500));var n},placeholder:Object(a.__)("Type to search","funnel-builder")}),(!Object(f.isArray)(c)||!!o)&&O&&Object(r.createElement)("div",{className:"bwf-suggestion-panel"},o),Object(f.isArray)(c)&&c.length>0&&O&&Object(r.createElement)("div",{className:"bwf-suggestion-panel",style:{width:"100%"}},Object(r.createElement)("ul",null,c.map((function(e){return Object(r.createElement)("li",{key:e.key},Object(r.createElement)("div",{onClick:function(t){return function(e,t){i(e),j(!1),t.preventDefault()}(e,t)}},e.value))})))))};j.defaultProps={onSearch:function(){},isLoading:!1,items:[],onItemClick:function(){},onChange:function(){},error:null},j.propTypes={onSearch:d.a.func,isLoading:d.a.bool,items:d.a.arrayOf(d.a.shape({key:d.a.oneOfType([d.a.number,d.a.string]).isRequired,value:d.a.string.isRequired})),onItemClick:d.a.func,onChange:d.a.func,error:d.a.any};var v=j;function y(e,t,n,r,c,a,l){try{var i=e[a](l),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,c)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,c=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){c=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(c)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){var t=w(Object(r.useState)(!1),2),n=t[0],c=t[1],i=e.step,s=i.type,b=i.title,m=i.is_substep,d=void 0!==m&&m,p=e.onStepSelected,O=w(Object(r.useState)(!1),2),j=O[0],h=O[1],E=w(Object(r.useState)([]),2),g=E[0],_=E[1],S=w(Object(r.useState)(!1),2),N=S[0],k=S[1],x=w(Object(r.useState)(null),2),C=x[0],P=x[1],I=N&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,Object(r.createElement)(l.Dashicon,{icon:"warning"}),Object(r.createElement)("span",null,Object(a.__)("".concat(b," not found"),"funnel-builder")))),A=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(f.isEmpty)(t)){e.next=4;break}return k(!1),_([]),e.abrupt("return");case 4:return h(!0),e.prev=5,n=d&&!0===d?"&is_substep=true":"",e.next=9,o()({path:Object(u.c)("/woofunnels-admin/funnels/step/search/?s=".concat(t,"&type=").concat(s).concat(n))});case 9:r=e.sent,Object(f.isArray)(r)&&r.length>0?_(r):_([]),Object(f.isArray)(r)&&r.length>0?k(!1):k(!0),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),_([]),k(!0);case 18:h(!1);case 19:case"end":return e.stop()}}),e,null,[[5,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function l(e){y(a,r,c,l,i,"next",e)}function i(e){y(a,r,c,l,i,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}(),T=g.map((function(e){return{key:e.id,value:e.name}})),D=C&&C.hasOwnProperty("value")?Object(a.__)("Selected ".concat(b,": "),"funnel-builder")+C.value:"";return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(l.CheckboxControl,{label:Object(a.__)(b?"Clone from another ".concat(b):"Clone from another step","funnel-builder"),value:n,checked:n,onChange:function(){c(!n),p({step:C,copyFrom:!n})}}),n&&Object(r.createElement)(v,{onSearch:function(e){return A(e)},isLoading:j,items:T,error:I,onItemClick:function(e){P(e),p({step:e,copyFrom:n})},blurText:D}))};function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,c=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){c=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(c)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=function(e){var t=e.step,n=e.requestCreateStep,c=g(Object(r.useState)(""),2),i=c[0],o=c[1],s=g(Object(r.useState)(null),2),u=s[0],b=s[1],m=g(Object(r.useState)({}),2),d=m[0],p=m[1],O=function(){var e={};Object(f.isEmpty)(i)&&(e.title=Object(a.__)("Title: This field is required","funnel-builder")),u&&u.copyFrom&&!u.step&&(e.copyFrom=Object(a.__)("Copy From: This field is required","funnel-builder")),0===Object(f.size)(e)?n({copyFrom:u&&u.hasOwnProperty("step")?u.step:null,title:i}):p(e)};return Object(r.createElement)(r.Fragment,null,d&&Object(f.size)(d)>0&&Object(r.createElement)(l.Notice,{status:"error",isDismissible:!0,onRemove:function(){return p({})}},Object(r.createElement)("ul",null,Object.keys(d).map((function(e){return Object(r.createElement)("li",{key:e},d[e])})))),Object(r.createElement)("form",{method:"post",action:"",className:"bwf-funnel-add-step",onSubmit:function(e){O(),e.preventDefault()}},Object(r.createElement)(l.TextControl,{label:Object(a.__)("Title","funnel-builder"),placeholder:Object(a.__)("Enter Name","funnel-builder"),value:i,onChange:function(e){return o(e)}}),Object(r.createElement)(E,{step:t,onStepSelected:function(e){return b(e)}}),Object(r.createElement)(l.Button,{isPrimary:!0,onClick:O},Object(a.__)("Create","funnel-builder"))))},N=n(148),k=n(41);function x(e,t,n,r,c,a,l){try{var i=e[a](l),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,c)}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,c=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){c=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(c)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I=function(){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:wffn.icons.success_check}}),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-h1"}," ",Object(a.__)("Step created successfully","funnel-builder"))))},A=function(){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:wffn.icons.error_cross}}),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-h1"}," ",Object(a.__)("Step creation failed","funnel-builder"))))},T=function(e){var t=e.query,n=e.isOpen,c=e.setModalOpenState,i=k.a.getAddStepData(),f=Object(N.a)(),m=f.addStep,d=f.addSubStep,p=f.endAddStep,O=f.updateFunnelViewLink,j=C(Object(r.useState)(null),2),v=j[0],y=j[1],w=Object(u.j)();Object(r.useEffect)((function(){i&&"type"in i&&(y(i),c(!0))}),[i]);var h=function(e){var t=v.is_substep,n=v.type,r=v.parent_id;e.status&&"data"in e&&(t?n in e.data.substeps&&Array.isArray(e.data.substeps[n])&&d(e.data.substeps[n][0],n,parseInt(r)):m(e.data))},E=C(Object(r.useState)(!1),2),g=E[0],_=E[1],P=C(Object(r.useState)(null),2),T=P[0],D=P[1],F=C(Object(r.useState)(!1),2),R=F[0],M=F[1],q=t.edit,z=void 0===q?0:q,B=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r,c,a,l,i,s,b,f,m,d,p,j;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),_(!0),n=v.type,r=void 0===n?"":n,c=v.parent_id,a=void 0===c?0:c,l=v.is_substep,i=void 0!==l&&l,s=t.copyFrom,b=void 0===s?{}:s,f=t.title,m=void 0===f?"":f,d=b&&b.hasOwnProperty("key")?b.key:0,p=i&&parseInt(a)>0?"".concat(a,"/substeps/"):"",e.prev=6,e.next=9,o()({method:"POST",path:Object(u.c)("/woofunnels-admin/funnels/".concat(z,"/steps/").concat(p)),data:{title:m,inherit_from:d,type:r}});case 9:(j=e.sent).hasOwnProperty("status")&&j.status?D(!0):D(!1),j.hasOwnProperty("status")&&j.status&&h(j),O(),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(6),console.log("Error While Creating Step: "),console.log(e.t0),D(!1),O();case 21:_(!1),U(!0);case 23:case"end":return e.stop()}}),e,null,[[6,15]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function l(e){x(a,r,c,l,i,"next",e)}function i(e){x(a,r,c,l,i,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}(),U=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(){y(null),p(),M(!1),D(null),c(!1)};if(e)var n=setTimeout((function(){clearTimeout(n),t()}),2e3);else t(),s},L=(v||{}).is_substep,V=!R&&v&&!(void 0!==L&&L)&&Object(r.createElement)(l.Button,{icon:"arrow-left-alt",onClick:function(){return y(null)}}),H=Object(r.createElement)(r.Fragment,null,V,v&&"popup_title"in v?v.popup_title:Object(a.__)("Select Step","funnel-builder"));return Object(r.createElement)(r.Fragment,null,n&&Object(r.createElement)(l.Modal,{title:H,isDismissible:!0,onRequestClose:function(){U()},className:"bwf-admin-modal bwf-admin-modal-large"},!R&&!v&&Object(r.createElement)(b,{steps:w,onStepSelected:function(e){return y(e)}}),!R&&v&&Object(r.createElement)(S,{step:v,requestCreateStep:B}),R&&g&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-spin-loader bwf-spin-loader-xl"}))),R&&!0===T&&Object(r.createElement)(I,null),R&&!1===T&&Object(r.createElement)(A,null)))};function D(e,t,n,r,c,a,l){try{var i=e[a](l),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,c)}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,c=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){c=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(c)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=function(e){var t=e.funnelId,n=void 0===t?0:t,c=k.a.getDuplicateStepData(),i=c.step,s=c.stepPos,b=c.shouldDuplicate,f=c.substepOf,m=void 0===f?null:f,d=F(Object(r.useState)(!1),2),p=d[0],O=d[1],j=F(Object(r.useState)(null),2),v=j[0],y=j[1],w=F(Object(r.useState)(null),2),h=w[0],E=w[1],g=Object(N.a)(),_=g.addStep,S=g.addSubStep,x=g.endDuplicateStep,C=function(){var e=setTimeout((function(){x(),clearTimeout(e)}),2e3)},P=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,t=m&&"id"in m?"".concat(m.id,"/substeps/"):"",e.next=5,o()({method:"POST",path:Object(u.c)("/woofunnels-admin/funnels/".concat(n,"/steps/").concat(t)),data:{duplicate_id:i.id,type:i.type}});case 5:"status"in(r=e.sent)&&r.status?(m&&"id"in m?S(r.data,i.type,m.id):_(r.data,s),y(!0)):(E({message:Object(a.__)("There are some technical difficulties while duplicating step. Contact Support","funnel-builder")}),y(!1)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),E(e.t0),y(!1);case 14:O(!1),C();case 16:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function l(e){D(a,r,c,l,i,"next",e)}function i(e){D(a,r,c,l,i,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){y(null),i&&P()}),[i]),b?Object(r.createElement)(l.Modal,{isDismissible:!0,onRequestClose:x,className:"bwf-admin-modal bwf-admin-modal-medium bwf-admin-modal-no-header"},p&&Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-spin-loader bwf-spin-loader-xl"})),!p&&!0===v&&Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{style:{width:"100px",display:"inline-block"},dangerouslySetInnerHTML:{__html:wffn.icons.success_check}})),!p&&!1===v&&Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{style:{width:"100px",display:"inline-block"},dangerouslySetInnerHTML:{__html:wffn.icons.error_cross}})),!p&&!0===v&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1"}," ",Object(a.__)("Step Duplicated","funnel-builder")))),!p&&!1===v&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-p"}," ",Object(a.__)("Error: ","funnel-builder")+h&&"message"in h?h.message:Object(a.__)("There are some technical difficulties while duplicating step. Please contact support","funnel-builder")," ")))):null};function q(e,t,n,r,c,a,l){try{var i=e[a](l),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,c)}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,c=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){c=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(c)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var U=function(e){var t=e.funnelId,n=void 0===t?0:t,c=k.a.getDeleteStepData(),i=c.step,s=c.stepPos,b=c.shouldDelete,f=c.substepOf,m=void 0===f?null:f,d=z(Object(r.useState)(!1),2),p=d[0],O=d[1],j=z(Object(r.useState)(null),2),v=j[0],y=j[1],w=z(Object(r.useState)(null),2),h=w[0],E=w[1],g=Object(N.a)(),_=g.removeStep,S=g.removeSubStep,x=g.endDeleteStep,C=g.updateFunnelViewLink,P=function(){var e=setTimeout((function(){clearTimeout(e),y(null),x()}),2e3)},I=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,r,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return t=i.id,r=i.type,O(!0),e.prev=4,c=m&&"id"in m?"".concat(m.id,"/substeps/").concat(t):t,e.next=8,o()({method:"POST",path:Object(u.c)("/woofunnels-admin/funnels/".concat(n,"/steps/").concat(c)),headers:{"X-HTTP-Method-Override":"DELETE"},data:{type:r}});case 8:"status"in(l=e.sent)&&l.status?(m&&"id"in m?S(m.stepPos,s,r):_(s),y(!0)):(E({message:Object(a.__)("There are some technical difficulties while deleting step. Contact Support","funnel-builder")}),y(!1)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),E(e.t0),y(!1);case 17:C(),O(!1),P();case 20:case"end":return e.stop()}}),e,null,[[4,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function l(e){q(a,r,c,l,i,"next",e)}function i(e){q(a,r,c,l,i,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}();return b?Object(r.createElement)(l.Modal,{isDismissible:!0,onRequestClose:x,className:"bwf-admin-modal bwf-admin-modal-medium bwf-admin-modal-no-header"},!p&&null===v&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf_align_center"},Object(a.__)("Are you sure you want to delete this step?","funnel-builder")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p"},Object(a.__)("This action can't be undone.","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)("div",{className:"bwf-t-center bwf-buttons-wrapper"},Object(r.createElement)(l.Button,{isPrimary:!0,onClick:I},Object(a.__)("Confirm","funnel-builder")),Object(r.createElement)(l.Button,{isSecondary:!0,onClick:x},Object(a.__)("Cancel","funnel-builder")))),p&&Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-spin-loader bwf-spin-loader-xl"}))),!p&&!0===v&&Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{style:{width:"100px",display:"inline-block"},dangerouslySetInnerHTML:{__html:wffn.icons.success_check}})),!p&&!1===v&&Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{style:{width:"100px",display:"inline-block"},dangerouslySetInnerHTML:{__html:wffn.icons.error_cross}})),!p&&!0===v&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1"}," ",Object(a.__)("Step Deleted","funnel-builder")))),!p&&!1===v&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-p"}," ",Object(a.__)("Error: ","funnel-builder")+h&&"message"in h?h.message:Object(a.__)("There are some technical difficulties while deleting step. Please contact support","funnel-builder")," ")))):null},L=n(441),V=n(414),H=n(40),$=n(66),K=n(149);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=function(e){var t=e.bump,n=t._data,c=void 0===n?{}:n,i=t.tags,o=e.bump,s=e.checkoutStep,u=e.checkoutPos,b=e.stepPos,m=c.title,d=c.edit,p=c.status,O=Object(N.a)(),j=O.startDuplicateStep,v=O.startDeleteStep;return Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("a",{href:Object(H.decodeEntities)(d)},Object(H.decodeEntities)(m)),p&&1===p?"":Object(a.__)(" — Draft","funnel-builder")),Object(f.size)(i)>0&&Object.keys(i).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+i[e].label_class},i[e].label))})),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{className:"bwf-card-action"}),Object(r.createElement)("a",{className:"bwf-card-action"}),Object(r.createElement)("a",{href:Object(H.decodeEntities)(d),title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)(l.Icon,{icon:"edit"}),Object(r.createElement)("span",null,"Edit")),Object(r.createElement)("div",{className:"bwf-card-action"},Object(r.createElement)($.a,{className:"bwf-c-ellipsis",label:Object(a.__)("Quick Actions","funnel-builder"),renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),j(J(J({},o),{},{type:"wc_order_bump"}),0,s)}},Object(r.createElement)(V.a,{justify:"flex-start"},Object(r.createElement)(V.b,null,Object(r.createElement)(l.Icon,{icon:"admin-page",size:"16"})),Object(r.createElement)(V.b,null,Object(a.__)("Duplicate","funnel-builder")))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),v(J(J({},o),{},{type:"wc_order_bump"}),b,J(J({},s),{},{stepPos:u}))}},Object(r.createElement)(V.a,{justify:"flex-start"},Object(r.createElement)(V.b,null,Object(r.createElement)(l.Icon,{icon:"trash",size:"16"})),Object(r.createElement)(V.b,null,Object(a.__)("Delete","funnel-builder")))))}}))))};function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,c=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){c=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(c)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ne=function(e){var t=e.step,n=(t=void 0===t?{}:t)._data,c=void 0===n?{}:n,i=t.tags,o=t.substeps,s=(o=void 0===o?{}:o).wc_order_bump,b=void 0===s?[]:s,m=t.id,d=void 0===m?0:m,p=e.step,O=e.stepPos,j=void 0===O?0:O,v=c.title,y=c.view,w=c.edit,h=c.status,E=void 0===h?0:h,g=Object(N.a)(),_=g.startDuplicateStep,S=g.startDeleteStep,k=g.startAddStep,x=g.setShowProModal,C=g.setShowProModalText,P=ee(Object(r.useState)(i),2),I=P[0],A=P[1];Object(r.useEffect)((function(){0!==Object(f.size)(b)||"no_bump"in i||A(G(G({},I),{},{no_bump:{label:"No Bumps",label_class:"bwf-st-c-badge-red"}}))}),[b.length]);var T=Object(u.k)("wc_order_bump");return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("a",{href:Object(H.decodeEntities)(w)},Object(H.decodeEntities)(v)),E&&1===parseInt(E)?"":Object(a.__)(" — Draft","funnel-builder")),Object(f.size)(i)>0&&Object.keys(I).map((function(e){return("no_bump"!==e||0===Object(f.size)(b))&&Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+I[e].label_class},I[e].label))})),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{onClick:function(e){null!==T&&k(G(G({},T),{},{parent_id:parseInt(d),is_substep:!0,title:"Order Bump"})),!T&&x(!0),!T&&C(Object(a.__)("Order Bump is a part of Funnel Builder Pro","funnel-builder")),e.preventDefault()},title:"Add Bump",className:"bwf-card-action"},Object(r.createElement)(l.Icon,{icon:"insert"}),Object(r.createElement)("span",null,"Bump")),Object(r.createElement)("a",{target:"_blank",href:Object(H.decodeEntities)(y),title:"View Step",className:"bwf-card-action"},Object(r.createElement)(l.Icon,{icon:"visibility"}),Object(r.createElement)("span",null,"View")),Object(r.createElement)("a",{href:Object(H.decodeEntities)(w),title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)(l.Icon,{icon:"edit"}),Object(r.createElement)("span",null,"Edit")),Object(r.createElement)("div",{className:"bwf-card-action"},Object(r.createElement)($.a,{className:"bwf-c-ellipsis",label:Object(a.__)("Quick Actions","funnel-builder"),renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),_(p,j+1)}},Object(r.createElement)(V.a,{justify:"flex-start"},Object(r.createElement)(V.b,null,Object(r.createElement)(l.Icon,{icon:"admin-page",size:"16"})),Object(r.createElement)(V.b,null,Object(a.__)("Duplicate","funnel-builder")))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),S(p,j)}},Object(r.createElement)(V.a,{justify:"flex-start"},Object(r.createElement)(V.b,null,Object(r.createElement)(l.Icon,{icon:"trash",size:"16"})),Object(r.createElement)(V.b,null,Object(a.__)("Delete","funnel-builder")))))}}))),null!==T&&Object(f.size)(b)>0&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-clear"}),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-sub-st-head"},Object(a.__)("Order Bump","funnel-builder")),b.map((function(e,t){return Object(r.createElement)(X,{key:t,bump:e,checkoutStep:p,checkoutPos:j,stepPos:t})})))))},re=function(e){var t=e.step,n=(t=void 0===t?{}:t)._data,c=void 0===n?{}:n,i=t.tags,o=void 0===i?[]:i,s=e.stepPos,u=e.step,b=c.title,m=c.view,d=c.edit,p=c.status,O=Object(N.a)(),j=O.startDuplicateStep,v=O.startDeleteStep;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("a",{href:Object(H.decodeEntities)(d)},Object(H.decodeEntities)(b)),p&&1===parseInt(p)?"":Object(a.__)(" — Draft","funnel-builder")),Object(f.size)(o)>0&&Object.keys(o).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+o[e].label_class},o[e].label))})),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{className:"bwf-card-action"}),Object(r.createElement)("a",{target:"_blank",href:Object(H.decodeEntities)(m),title:"View Step",className:"bwf-card-action"},Object(r.createElement)(l.Icon,{icon:"visibility"}),Object(r.createElement)("span",null,"View")),Object(r.createElement)("a",{href:Object(H.decodeEntities)(d),title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)(l.Icon,{icon:"edit"}),Object(r.createElement)("span",null,"Edit")),Object(r.createElement)("div",{className:"bwf-card-action"},Object(r.createElement)($.a,{className:"bwf-c-ellipsis",label:Object(a.__)("Quick Actions","funnel-builder"),renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),j(u,s+1)}},Object(r.createElement)(V.a,{justify:"flex-start"},Object(r.createElement)(V.b,null,Object(r.createElement)(l.Icon,{icon:"admin-page",size:"16"})),Object(r.createElement)(V.b,null,Object(a.__)("Duplicate","funnel-builder")))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),v(u,s)}},Object(r.createElement)(V.a,{justify:"flex-start"},Object(r.createElement)(V.b,null,Object(r.createElement)(l.Icon,{icon:"trash",size:"16"})),Object(r.createElement)(V.b,null,Object(a.__)("Delete","funnel-builder")))))}}))))};function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ae(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var le=Object(L.c)((function(){return Object(r.createElement)("span",{title:"Click here and start drag and drop",className:"bwf-d-icon-drag dashicons dashicons-menu"})})),ie=Object(L.b)((function(e){var t=e.step,n=(t=void 0===t?{}:t).type,c=e.step,a=ae(e,["step","step"]),l=Object(u.j)(n);return l?Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head"},l.title),Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)(le,null),"wc_checkout"===n?Object(r.createElement)(ne,ce({step:c},a)):Object(r.createElement)(re,ce({step:c},a)))):null})),oe=Object(L.a)((function(e){var t=e.items;return Object(r.createElement)("div",{className:"bwf-f-steps"},t.map((function(e,t){return Object(r.createElement)(ie,{key:"item-".concat(e.id),index:t,step:e,stepPos:t})})))})),se=function(){return Object(r.createElement)("div",{className:"bwf-f-steps"},Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head"}),Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{style:{visibility:"hidden"},title:"Click here and start drag and drop",className:"bwf-d-icon-drag dashicons dashicons-menu"}),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{className:"is-placeholder long"})),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{target:"_blank",href:"",title:"View Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("a",{href:"",title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"}))))),Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head"}),Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{style:{visibility:"hidden"},title:"Click here and start drag and drop",className:"bwf-d-icon-drag dashicons dashicons-menu"}),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{className:"is-placeholder long"})),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{target:"_blank",href:"",title:"View Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("a",{href:"",title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"}))))),Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head"}),Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{style:{visibility:"hidden"},title:"Click here and start drag and drop",className:"bwf-d-icon-drag dashicons dashicons-menu"}),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{className:"is-placeholder long"})),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{target:"_blank",href:"",title:"View Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("a",{href:"",title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"}))))),Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head"}),Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{style:{visibility:"hidden"},title:"Click here and start drag and drop",className:"bwf-d-icon-drag dashicons dashicons-menu"}),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{className:"is-placeholder long"})),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{target:"_blank",href:"",title:"View Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("a",{href:"",title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"}))))))},ue=function(e){var t=k.a.getShowProModal(),n=(k.a.getShowProModalText(),Object(N.a)().setShowProModal);return t?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(l.Modal,{className:"bwf-admin-modal bwf-admin-modal-medium bwf-admin-modal-no-header",isDismissible:!0,onRequestClose:function(){return n(!1)}},Object(r.createElement)("div",{className:"bwf_clear"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf_align_center"},Object(r.createElement)(l.Icon,{icon:"lock",size:"30",style:{marginRight:5}})," ",Object(a.__)("Bumps are part of Funnel Builder Pro","funnel-builder")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p"},"Unlock this Pro feature now and experience the fully-loaded version.")),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("a",{isPrimary:!0,href:"https://buildwoofunnels.com/exclusive-offer/",className:"components-button is-primary"},Object(a.__)("Unlock the Pro Version","funnel-builder"),"  ",Object(r.createElement)(l.Icon,{icon:"arrow-right-alt",size:"20"}))))):null};ue.defaultProps={isOpen:!1,onRequestClose:function(){}};var be=ue;function fe(e,t,n,r,c,a,l){try{var i=e[a](l),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,c)}function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,c=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){c=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(c)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=location&&location.search?Object(c.parse)(location.search.substring(1)):{},n=t.edit,i=Object(N.a)(),s=i.fetch,b=i.sortSteps,m=i.updateFunnelViewLink,d=k.a.getFunnel(),p=k.a.getFunnelLoading(),O=k.a.getFunnelError(),j=me(Object(r.useState)(!1),2),v=j[0],y=j[1],w=me(Object(r.useState)(!0),2),h=w[0],E=w[1];Object(r.useEffect)((function(){E(!1)}),[p]),Object(r.useEffect)((function(){s(parseInt(n))}),[]);var g=Object(r.useContext)(u.a),_=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.oldIndex,c=t.newIndex,r!==c){e.next=3;break}return e.abrupt("return");case 3:return l=b(r,c),g(Object(a.__)("Sorting Steps in Progress...")),e.prev=5,e.next=8,o()({path:Object(u.c)("/woofunnels-admin/funnels/".concat(n)),method:"PUT",data:{steps:JSON.stringify(l.map((function(e){return{id:e.id,type:e.type}})))}});case 8:m(l.length>0?l[0]._data.view:""),g(Object(a.__)("Steps Updated")),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(5),b(c,r),m(l.length>0?l[0]._data.view:""),g(Object(a.__)("Steps Updation Failed"));case 17:Object(f.delay)(g,2e3,"");case 18:case"end":return e.stop()}}),e,null,[[5,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function l(e){fe(a,r,c,l,i,"next",e)}function i(e){fe(a,r,c,l,i,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}();return h||p?Object(r.createElement)(se,null):O?Object(r.createElement)(l.Notice,{status:"error"},O.hasOwnProperty("message")?O.message:Object(a.__)("Unable to load Funnel Steps","funnel-builder")):Object(r.createElement)(r.Fragment,null,d&&d.hasOwnProperty("steps")&&Object(f.isArray)(d.steps)&&0!==Object(f.size)(d.steps)?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(oe,{items:d.steps,onSortEnd:_,lockAxis:"y",useDragHandle:!0}),Object(r.createElement)("div",{className:"bwf-st-add"},Object(r.createElement)(l.Button,{onClick:function(){return y(!0)},isPrimary:!0},Object(r.createElement)(l.Icon,{icon:"plus"}),Object(a.__)("Add New Step","funnel-builder")))):Object(r.createElement)("div",{id:"wffn_design_welcome_wrap"},Object(r.createElement)("div",{className:"wffn_welcome_wrap"},Object(r.createElement)("div",{className:"wffn_welcome_wrap_in"},Object(r.createElement)("div",{className:"wffn_welc_head"},Object(r.createElement)("div",{className:"wffn_welc_icon"},Object(r.createElement)("img",{src:wffn_contacts_data.admin_url+"/assets/img/clap.png",alt:""})),Object(r.createElement)("div",{className:"wffn_welc_title"}," ",Object(a.__)("No steps are setup on this funnel.","funnel-builder"))),Object(r.createElement)("div",{className:"wffn_welc_text"},Object(r.createElement)("p",null,Object(a.__)('You can start creating steps by clicking "Add New Step" button.',"woofunnels-upstroke-one-click-upsell"))),Object(r.createElement)("div",{className:"bwf-st-add"},Object(r.createElement)(l.Button,{onClick:function(){return y(!0)},isPrimary:!0},Object(r.createElement)(l.Icon,{icon:"plus"}),Object(a.__)("Add New Step","funnel-builder")))))),Object(r.createElement)(M,{funnelId:n}),Object(r.createElement)(U,{funnelId:n}),Object(r.createElement)(be,null),Object(r.createElement)(T,{query:t,isOpen:v,setModalOpenState:function(e){return y(e)}}))}},66:function(e,t,n){"use strict";var r=n(0),c=n(11),a=n.n(c),l=n(10),i=n(143),o=n(396),s=n(1),u=n.n(s);n(249);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var c=j(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,n,c,s=p(u);function u(){return f(this,u),s.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this.props,t=e.label,n=e.renderContent,c=e.className;return n?Object(r.createElement)("div",{className:"bwf-ellipsis-menu ".concat(c,"-medium")},Object(r.createElement)(l.Dropdown,{contentClassName:"bwf-ellipsis-menu__popover",position:"bottom left",renderToggle:function(e){var n=e.onToggle,c=e.isOpen,s=a()("bwf-ellipsis-menu__toggle",{"is-opened":c});return Object(r.createElement)(l.Button,{className:s,onClick:n,icon:"ellipsis",title:t,"aria-expanded":c},Object(r.createElement)(i.a,{icon:o.a}))},renderContent:function(e){return Object(r.createElement)(l.NavigableMenu,{className:"bwf-ellipsis-menu__content"},n(e))}})):null}}])&&m(t.prototype,n),c&&m(t,c),u}(r.Component);v.propTypes={label:u.a.string.isRequired,renderContent:u.a.func},t.a=v}}]);