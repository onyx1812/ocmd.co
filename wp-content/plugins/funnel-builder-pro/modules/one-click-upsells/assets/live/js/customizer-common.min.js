"use strict";!function(a){a(window).on("load",function(){"undefined"!=typeof wfocu_customizer&&wfocu_customizer.hasOwnProperty("is_loaded")&&"yes"===wfocu_customizer.is_loaded&&0<wfocu_customizer.offer_id&&(_wpCustomizeSettings.changeset.latestAutoDraftUuid=null,wp.customize.bind("changeset-save",function(e,t){t.wfocu_customize="loaded",t.offer_id=wfocu_customizer.offer_id}),wp.customize.bind("save-request-params",function(e){return e.wfocu_customize="loaded",e.offer_id=wfocu_customizer.offer_id,e}),wp.customize("wfocu_c_"+wfocu_customizer.offer_id+"[wfocu_offer_confirmation_offer_confirmation_cart_opener_text]",function(e){e.bind(function(e){setTimeout(function(){var e=a("#customize-preview > iframe").contents(),t=e.find(".wfocu-offer-btn-wrap").height(),o=parseInt(t/2),t=parseInt(o-6);e.find(".wfocu-offer-btn-wrap a").find(".wfocu-left-arrow").css({"border-top-width":o,"border-bottom-width":o,"border-right-width":t,left:-t})},300)})}),wp.customize.state("expandedSection").bind(function(e){var t=a("#customize-preview > iframe").contents();"wfocu_offer_confirmation_offer_confirmation"===e.id?(t.find("body").addClass("wfocu-sidecart-open"),t.find("body.wfocu-sidecart-open .wfocu-offer-btn-wrap").css({right:"355px","z-index":99999})):(t.find("body.wfocu-sidecart-open .wfocu-offer-btn-wrap").css({right:"-355px"}),t.find("body").removeClass("wfocu-sidecart-open"))}),wp.customize.state("changesetStatus").bind(function(e){""!==e&&wp.customize.previewer.refresh()}),wp.customize.state("expandedSection").bind(function(e){var t;void 0===e.id||0<(e=(t=a("#customize-preview > iframe").contents()).find('body div[data-scrollto="'+e.id+'"]')).length&&t.find("html, body").animate({scrollTop:e.offset().top},1e3)}),a("#publish-settings").replaceWith('<button id="wfocu-preview-btn" class="publish-settings button-primary button dashicons dashicons-visibility" title="Publish & Preview"aria-label="" aria-expanded="false" style="display: block;"></button> <button id="wfocu-preset-btn" style="width:32px" class="publish-settings button-primary button dashicons dashicons-admin-customizer" title="Save Preset" aria-label="" aria-expanded="false" style="display: block;"></button>'),a("#customize-outer-theme-controls").replaceWith(wfocu_customizer.save_preset_html),a("#wfocu-preview-btn").on("click",function(e){return e.preventDefault(),window.open(wp.customize.previewer.getFrontendPreviewUrl()),!1}),a("#wfocu-preset-btn").on("click",function(e){e.preventDefault(),a("body").toggleClass("outer-section-open")}),setTimeout(function(){a(document).on("click","#save_wfocu_design",function(){var t,o;a("#save").is(":disabled")?(t=a(this),0<(o=a("#wfocu_template_name")).length&&""!==o.val()?(o.prop("disabled",!0),t.prop("disabled",!0),o.removeClass("wfocu_template_name_error"),a(".wfocu-ajax-loader").removeClass("hide"),a.ajax({url:wfocu_customizer.ajax_url,method:"post",data:{action:"wfocu_save_template",template_name:o.val(),offer_id:wfocu_customizer.offer_id,_nonce:wfocu_customizer.wfocu_nonce_save_template},success:function(e){a(".wfocu-ajax-loader").addClass("hide"),1==e.status&&(a(".wfocu-save-preset").removeClass("hide"),setTimeout(function(){a(".wfocu-save-preset").addClass("hide")},3e3),0==a(".wfocu_template_holder").length&&a("#wfocu_template_holder").append("<label for='apply-saved-preset-style' class='customize-control-title wfocu_av_template'>Apply Saved Preset Style</label>"),a("#wfocu_template_holder").append(e.msg)),o.val(""),o.removeAttr("disabled"),t.removeAttr("disabled")}})):o.addClass("wfocu_template_name_error")):alert(wfocu_customizer.preset_message)}),a(document).on("change",".wfocu_template",function(){a(this).is(":checked")&&(a(".wfocu_apply_template").show(),a(".wfocu_apply_preset_ins").show())}),a(document).on("click",".wfocu_apply_template",function(){var e=a(".wfocu_template:checked");0<e.length&&(""!=(e=e.val())&&(a(".wfocu-ajax-apply-preset-loader").removeClass("hide"),a.ajax({url:wfocu_customizer.ajax_url,method:"post",data:{action:"wfocu_apply_template",template_slug:e,offer_id:wfocu_customizer.offer_id,_nonce:wfocu_customizer.wfocu_nonce_apply_template},success:function(e){1==e.status&&(a(".wfocu-ajax-apply-preset-loader").addClass("hide"),window.location.reload(0))}})))}),a(document).on("click",".wfocu_delete_template",function(){var e,t=a(this);0<t.length&&(""!=(e=t.attr("data-slug"))&&(a(this).parent().find(".wfocu-ajax-delete-loader").removeClass("hide"),a.ajax({url:wfocu_customizer.ajax_url,method:"post",data:{action:"wfocu_delete_template",template_slug:e,offer_id:wfocu_customizer.offer_id,_nonce:wfocu_customizer.wfocu_nonce_delete_template},success:function(e){a(".wfocu-delete-preset").removeClass("hide"),setTimeout(function(){a(".wfocu-delete-preset").addClass("hide")},3e3),1==e.status&&(t.parents(".customize-inside-control-row").fadeOut().remove(),0==a(".wfocu_template_holder").length&&(a(".wfocu_apply_template").hide(),a(".wfocu_av_template").css("display","none")))}})))})},300))})}(jQuery);